# Generated by Django 5.1.1 on 2025-11-02 11:32

import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='GrantCall',
            fields=[
                ('call_id', models.AutoField(db_column='call_id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('provider', models.CharField(blank=True, db_column='provider', max_length=255, null=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('type', models.CharField(choices=[('dotace', 'Dotace'), ('grant', 'Grant'), ('stipendium', 'Stipendium')], db_column='type', default='dotace', max_length=50)),
                ('start_date', models.DateField(blank=True, db_column='start_date', null=True)),
                ('end_date', models.DateField(blank=True, db_column='end_date', null=True)),
                ('budget', models.DecimalField(blank=True, db_column='budget', decimal_places=2, max_digits=15, null=True)),
                ('eligibility', models.TextField(blank=True, db_column='eligibility', null=True)),
                ('status', models.CharField(choices=[('upcoming', 'Upcoming'), ('open', 'Open'), ('closed', 'Closed')], db_column='status', default='open', max_length=20)),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
                ('published_at', models.DateField(auto_now_add=True, db_column='published_at')),
                ('source', models.CharField(choices=[('manual', 'Manuální'), ('dotaceeu', 'DotaceEU'), ('msmt', 'MŠMT'), ('other_api', 'Jiné API')], db_column='source', default='manual', max_length=50)),
                ('external_id', models.CharField(blank=True, db_column='external_id', help_text='ID z externí databáze (dotaceEU, MŠMT)', max_length=255, null=True, unique=True)),
                ('source_url', models.URLField(blank=True, db_column='source_url', help_text='Odkaz na dotaci v původním systému', null=True)),
                ('external_metadata', models.JSONField(db_column='external_metadata', default=dict, help_text='Dodatečná data z externího API')),
                ('last_synced', models.DateTimeField(blank=True, db_column='last_synced', null=True)),
                ('tags', models.CharField(blank=True, db_column='tags', help_text='Tagy oddělené čárkami: startup,inovace,kultura', max_length=500, null=True)),
                ('min_amount', models.DecimalField(blank=True, db_column='min_amount', decimal_places=2, max_digits=15, null=True)),
                ('max_amount', models.DecimalField(blank=True, db_column='max_amount', decimal_places=2, max_digits=15, null=True)),
                ('priority', models.IntegerField(db_column='priority', default=0, help_text='Vyšší číslo = vyšší priorita zobrazení')),
            ],
            options={
                'db_table': 'FDK_grant_call',
            },
        ),
        migrations.CreateModel(
            name='GrantProgram',
            fields=[
                ('program_id', models.AutoField(db_column='program_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('provider', models.CharField(blank=True, db_column='provider', max_length=255, null=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('total_budget', models.DecimalField(blank=True, db_column='total_budget', decimal_places=2, max_digits=15, null=True)),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
            ],
            options={
                'db_table': 'FDK_grant_program',
            },
        ),
        migrations.CreateModel(
            name='Law',
            fields=[
                ('id', models.BigAutoField(db_column='id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=300)),
                ('number', models.CharField(db_column='number', max_length=50)),
                ('year', models.IntegerField(db_column='year')),
                ('content', models.TextField(db_column='content')),
                ('category', models.CharField(db_column='category', max_length=100)),
                ('effective_date', models.DateField(db_column='effective_date')),
                ('created_at', models.DateTimeField(db_column='created_at')),
            ],
            options={
                'db_table': 'FDK_law',
            },
        ),
        migrations.CreateModel(
            name='law_detail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=300)),
                ('number', models.CharField(max_length=50)),
                ('year', models.IntegerField()),
                ('content', models.TextField()),
                ('category', models.CharField(max_length=100)),
                ('effective_date', models.DateField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='LawDocument',
            fields=[
                ('document_id', models.AutoField(primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('document_type', models.CharField(max_length=50)),
                ('content', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'FDK_law_document',
            },
        ),
        migrations.CreateModel(
            name='LawQuery',
            fields=[
                ('query_id', models.AutoField(primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('question', models.TextField()),
                ('ai_response', models.TextField(blank=True, null=True)),
                ('status', models.CharField(max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'FDK_law_query',
            },
        ),
        migrations.CreateModel(
            name='Module',
            fields=[
                ('module_id', models.AutoField(db_column='module_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=100, unique=True)),
                ('display_name', models.CharField(db_column='display_name', max_length=200)),
                ('display_name_en', models.CharField(blank=True, db_column='display_name_en', max_length=200, null=True)),
                ('description', models.TextField(db_column='description')),
                ('short_description', models.CharField(blank=True, db_column='short_description', max_length=255, null=True)),
                ('price_monthly', models.DecimalField(db_column='price_monthly', decimal_places=2, default=0, max_digits=10)),
                ('price_yearly', models.DecimalField(db_column='price_yearly', decimal_places=2, default=0, max_digits=10)),
                ('is_free', models.BooleanField(db_column='is_free', default=False)),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
                ('requires_organization', models.BooleanField(db_column='requires_organization', default=False)),
                ('url_patterns', models.JSONField(db_column='url_patterns', default=list)),
                ('icon', models.CharField(blank=True, db_column='icon', max_length=50, null=True)),
                ('color', models.CharField(db_column='color', default='#3b82f6', max_length=7)),
                ('order', models.IntegerField(db_column='order', default=0)),
                ('free_limit', models.IntegerField(blank=True, db_column='free_limit', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
            ],
            options={
                'db_table': 'FDK_module',
                'ordering': ['order', 'display_name'],
            },
        ),
        migrations.CreateModel(
            name='ProjectPermission',
            fields=[
                ('permission_id', models.AutoField(primary_key=True, serialize=False)),
                ('permission_name', models.CharField(max_length=255, unique=True)),
            ],
            options={
                'db_table': 'FDK_permissions',
            },
        ),
        migrations.CreateModel(
            name='ProjectRole',
            fields=[
                ('role_id', models.AutoField(primary_key=True, serialize=False)),
                ('role_name', models.CharField(max_length=255, unique=True)),
            ],
            options={
                'db_table': 'FDK_roles',
            },
        ),
        migrations.CreateModel(
            name='Users2',
            fields=[
                ('user_id', models.AutoField(db_column='user_id', primary_key=True, serialize=False)),
                ('username', models.CharField(db_column='username', max_length=100, unique=True)),
                ('password_hash', models.CharField(db_column='password_hash', max_length=255)),
                ('email', models.EmailField(db_column='email', max_length=255, unique=True)),
                ('description', models.CharField(blank=True, db_column='description', max_length=512, null=True)),
                ('created', models.DateTimeField(blank=True, db_column='created', null=True)),
                ('last_login', models.DateTimeField(blank=True, db_column='last_login', null=True)),
            ],
            options={
                'db_table': 'FDK_users',
            },
        ),
        migrations.CreateModel(
            name='Warehouse',
            fields=[
                ('warehouse_id', models.AutoField(db_column='warehouse_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('location', models.CharField(db_column='location', max_length=255)),
                ('created', models.DateTimeField(auto_now_add=True, db_column='created')),
            ],
            options={
                'db_table': 'FDK_warehouse',
            },
        ),
        migrations.CreateModel(
            name='ActivityLog',
            fields=[
                ('log_id', models.AutoField(db_column='log_id', primary_key=True, serialize=False)),
                ('user_action', models.CharField(db_column='user_action', max_length=100)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('date_time', models.DateTimeField(blank=True, db_column='date_time', null=True)),
                ('user', models.ForeignKey(db_column='user_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activity_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_activity_log',
            },
        ),
        migrations.CreateModel(
            name='Article',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('slug', models.SlugField(db_column='slug', max_length=255, unique=True)),
                ('category', models.CharField(choices=[('Page', 'Webová stránka'), ('Help', 'Nápověda / Dokumentace'), ('Announcement', 'Oznámení / Novinka'), ('Blog', 'Blogový příspěvek'), ('Internal', 'Interní poznámka')], db_column='category', default='Page', max_length=50)),
                ('content', models.TextField(db_column='content')),
                ('summary', models.TextField(blank=True, db_column='summary', help_text='Krátký perex nebo popis', null=True)),
                ('meta_header', models.TextField(blank=True, db_column='meta_header', help_text='HTML kód do <head> (např. knihovny, meta tagy)')),
                ('meta_footer', models.TextField(blank=True, db_column='meta_footer', help_text='HTML/JS kód před </body>')),
                ('is_published', models.BooleanField(db_column='is_published', default=True)),
                ('is_featured', models.BooleanField(db_column='is_featured', default=False, help_text='Zobrazit v hlavních oznámeních nebo na dashboardu')),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('author', models.ForeignKey(blank=True, db_column='author_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='articles', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_articles',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='B2BCompany',
            fields=[
                ('company_id', models.AutoField(db_column='company_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('legal_name', models.CharField(blank=True, db_column='legal_name', max_length=255, null=True)),
                ('company_id_number', models.CharField(blank=True, db_column='company_id_number', max_length=50, null=True)),
                ('tax_id', models.CharField(blank=True, db_column='tax_id', max_length=50, null=True)),
                ('email', models.EmailField(blank=True, db_column='email', max_length=254, null=True)),
                ('phone', models.CharField(blank=True, db_column='phone', max_length=20, null=True)),
                ('website', models.URLField(blank=True, db_column='website', null=True)),
                ('street', models.CharField(blank=True, db_column='street', max_length=255, null=True)),
                ('city', models.CharField(blank=True, db_column='city', max_length=100, null=True)),
                ('postal_code', models.CharField(blank=True, db_column='postal_code', max_length=20, null=True)),
                ('country', models.CharField(db_column='country', default='Česká republika', max_length=100)),
                ('category', models.CharField(choices=[('supplier', 'Dodavatel'), ('customer', 'Zákazník'), ('partner', 'Partner'), ('competitor', 'Konkurent'), ('other', 'Jiné')], db_column='category', max_length=20)),
                ('tags', models.CharField(blank=True, db_column='tags', max_length=500, null=True)),
                ('notes', models.TextField(blank=True, db_column='notes', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('created_by', models.ForeignKey(blank=True, db_column='created_by_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_b2b_companies', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_b2b_company',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='B2BContract',
            fields=[
                ('contract_id', models.AutoField(db_column='contract_id', primary_key=True, serialize=False)),
                ('contract_number', models.CharField(db_column='contract_number', max_length=100, unique=True)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('contract_value', models.DecimalField(blank=True, db_column='contract_value', decimal_places=2, max_digits=15, null=True)),
                ('currency', models.CharField(db_column='currency', default='CZK', max_length=3)),
                ('start_date', models.DateField(db_column='start_date')),
                ('end_date', models.DateField(blank=True, db_column='end_date', null=True)),
                ('signed_date', models.DateField(blank=True, db_column='signed_date', null=True)),
                ('status', models.CharField(choices=[('draft', 'Koncept'), ('negotiation', 'V jednání'), ('signed', 'Podepsáno'), ('active', 'Aktivní'), ('completed', 'Dokončeno'), ('terminated', 'Ukončeno'), ('cancelled', 'Zrušeno')], db_column='status', default='draft', max_length=20)),
                ('categories', models.CharField(blank=True, db_column='categories', max_length=500, null=True)),
                ('keywords', models.CharField(blank=True, db_column='keywords', max_length=500, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('company', models.ForeignKey(db_column='company_id', on_delete=django.db.models.deletion.CASCADE, related_name='contracts', to='fdk_cz.b2bcompany')),
                ('created_by', models.ForeignKey(blank=True, db_column='created_by_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_b2b_contracts', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_b2b_contract',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Company',
            fields=[
                ('company_id', models.AutoField(db_column='company_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('street', models.CharField(db_column='street', max_length=128)),
                ('street_number', models.CharField(db_column='street_number', max_length=10)),
                ('city', models.CharField(db_column='city', max_length=128)),
                ('postal_code', models.CharField(db_column='postal_code', max_length=20)),
                ('state', models.CharField(db_column='state', max_length=128)),
                ('ico', models.CharField(db_column='ico', max_length=20, unique=True)),
                ('dic', models.CharField(blank=True, db_column='dic', max_length=20, null=True)),
                ('phone', models.CharField(blank=True, db_column='phone', max_length=15, null=True)),
                ('email', models.EmailField(blank=True, db_column='email', max_length=254, null=True)),
                ('is_vat_payer', models.BooleanField(db_column='is_vat_payer', default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('users', models.ManyToManyField(db_column='users', related_name='companies', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_company',
            },
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('department_id', models.AutoField(db_column='department_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('manager', models.ForeignKey(blank=True, db_column='manager_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_departments', to=settings.AUTH_USER_MODEL)),
                ('parent_department', models.ForeignKey(blank=True, db_column='parent_department_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sub_departments', to='fdk_cz.department')),
            ],
            options={
                'db_table': 'FDK_department',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Flist',
            fields=[
                ('list_id', models.AutoField(db_column='list_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('is_private', models.BooleanField(db_column='is_private', default=True)),
                ('created', models.DateTimeField(db_column='created', default=django.utils.timezone.now)),
                ('modified', models.DateTimeField(auto_now=True, db_column='modified', null=True)),
                ('owner', models.ForeignKey(db_column='owner_id', on_delete=django.db.models.deletion.CASCADE, related_name='owned_lists', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_lists',
            },
        ),
        migrations.CreateModel(
            name='GrantApplication',
            fields=[
                ('application_id', models.AutoField(db_column='application_id', primary_key=True, serialize=False)),
                ('submission_date', models.DateField(blank=True, db_column='submission_date', null=True)),
                ('approval_date', models.DateField(blank=True, db_column='approval_date', null=True)),
                ('requested_amount', models.DecimalField(blank=True, db_column='requested_amount', decimal_places=2, max_digits=12, null=True)),
                ('granted_amount', models.DecimalField(blank=True, db_column='granted_amount', decimal_places=2, max_digits=12, null=True)),
                ('status', models.CharField(choices=[('draft', 'Koncept'), ('submitted', 'Odesláno'), ('approved', 'Schváleno'), ('rejected', 'Zamítnuto'), ('in_progress', 'V procesu')], db_column='status', default='draft', max_length=50)),
                ('notes', models.TextField(blank=True, db_column='notes', null=True)),
                ('is_successful', models.BooleanField(db_column='is_successful', default=False)),
                ('is_visible', models.BooleanField(db_column='is_visible', default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('lifecycle_stage', models.CharField(choices=[('preparation', 'Příprava žádosti'), ('submitted', 'Odesláno'), ('under_review', 'Probíhá hodnocení'), ('approved', 'Schváleno'), ('rejected', 'Zamítnuto'), ('in_progress', 'V realizaci'), ('reporting', 'Reporting'), ('completed', 'Ukončeno'), ('archived', 'Archivováno')], db_column='lifecycle_stage', default='preparation', max_length=50)),
                ('report_deadline', models.DateField(blank=True, db_column='report_deadline', help_text='Termín odevzdání závěrečné zprávy', null=True)),
                ('last_report_submitted', models.DateTimeField(blank=True, db_column='last_report_submitted', null=True)),
                ('actual_received_amount', models.DecimalField(blank=True, db_column='actual_received_amount', decimal_places=2, help_text='Skutečně obdržená částka (může se lišit od schválené)', max_digits=12, null=True)),
                ('completion_percentage', models.IntegerField(db_column='completion_percentage', default=0, help_text='Stupeň dokončení projektu (0-100%)')),
                ('applicant', models.ForeignKey(blank=True, db_column='applicant_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='submitted_applications', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='grant_applications', to='fdk_cz.company')),
                ('call', models.ForeignKey(db_column='call_id', on_delete=django.db.models.deletion.CASCADE, related_name='applications', to='fdk_cz.grantcall')),
            ],
            options={
                'db_table': 'FDK_grant_application',
            },
        ),
        migrations.CreateModel(
            name='GrantDocumentTemplate',
            fields=[
                ('template_id', models.AutoField(db_column='template_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('document_type', models.CharField(choices=[('project_description', 'Popis projektu'), ('budget', 'Rozpočet'), ('timeline', 'Časový harmonogram'), ('team', 'Složení týmu'), ('motivation', 'Motivační dopis'), ('references', 'Reference'), ('other', 'Jiné')], db_column='document_type', max_length=100)),
                ('fields_schema', models.JSONField(db_column='fields_schema', default=list, help_text='JSON pole objektů: [{"name": "field_name", "type": "text", "label": "Label", "required": true}]')),
                ('template_content', models.TextField(db_column='template_content', help_text='Markdown šablona s {{placeholders}}')),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('created_by', models.ForeignKey(db_column='created_by', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_grant_document_template',
            },
        ),
        migrations.AddField(
            model_name='grantcall',
            name='program',
            field=models.ForeignKey(blank=True, db_column='program_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='calls', to='fdk_cz.grantprogram'),
        ),
        migrations.CreateModel(
            name='GrantRequirement',
            fields=[
                ('requirement_id', models.AutoField(db_column='requirement_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('is_mandatory', models.BooleanField(db_column='is_mandatory', default=True)),
                ('call', models.ForeignKey(db_column='call_id', on_delete=django.db.models.deletion.CASCADE, related_name='requirements', to='fdk_cz.grantcall')),
            ],
            options={
                'db_table': 'FDK_grant_requirement',
            },
        ),
        migrations.CreateModel(
            name='GrantApplicationDocument',
            fields=[
                ('document_id', models.AutoField(db_column='document_id', primary_key=True, serialize=False)),
                ('file', models.FileField(db_column='file', upload_to='grant_documents/')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True, db_column='uploaded_at')),
                ('application', models.ForeignKey(db_column='application_id', on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='fdk_cz.grantapplication')),
                ('requirement', models.ForeignKey(blank=True, db_column='requirement_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='application_documents', to='fdk_cz.grantrequirement')),
            ],
            options={
                'db_table': 'FDK_grant_application_document',
            },
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('invoice_id', models.AutoField(db_column='invoice_id', primary_key=True, serialize=False)),
                ('invoice_number', models.CharField(db_column='invoice_number', max_length=20, unique=True)),
                ('issue_date', models.DateField(db_column='issue_date')),
                ('due_date', models.DateField(db_column='due_date')),
                ('total_price', models.DecimalField(db_column='total_price', decimal_places=2, max_digits=10)),
                ('vat_amount', models.DecimalField(db_column='vat_amount', decimal_places=2, max_digits=10)),
                ('vat_rate', models.DecimalField(db_column='vat_rate', decimal_places=2, default=21, max_digits=5)),
                ('is_paid', models.BooleanField(db_column='is_paid', default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('company', models.ForeignKey(db_column='company_id', on_delete=django.db.models.deletion.CASCADE, related_name='invoices', to='fdk_cz.company')),
            ],
            options={
                'db_table': 'FDK_invoice',
            },
        ),
        migrations.CreateModel(
            name='InvoiceItem',
            fields=[
                ('invoice_item_id', models.AutoField(db_column='invoice_item_id', primary_key=True, serialize=False)),
                ('description', models.CharField(db_column='description', max_length=255)),
                ('quantity', models.DecimalField(db_column='quantity', decimal_places=2, max_digits=10)),
                ('unit_price', models.DecimalField(db_column='unit_price', decimal_places=2, max_digits=10)),
                ('total_price', models.DecimalField(db_column='total_price', decimal_places=2, max_digits=10)),
                ('vat_rate', models.DecimalField(db_column='vat_rate', decimal_places=2, default=21, max_digits=5)),
                ('invoice', models.ForeignKey(db_column='invoice_id', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='fdk_cz.invoice')),
            ],
            options={
                'db_table': 'FDK_invoice_item',
            },
        ),
        migrations.CreateModel(
            name='ITAsset',
            fields=[
                ('asset_id', models.AutoField(db_column='asset_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('asset_tag', models.CharField(db_column='asset_tag', max_length=100, unique=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('asset_type', models.CharField(choices=[('server', 'Server'), ('workstation', 'Pracovní stanice'), ('laptop', 'Notebook'), ('mobile', 'Mobilní zařízení'), ('network', 'Síťové zařízení'), ('storage', 'Úložiště'), ('printer', 'Tiskárna'), ('software', 'Software'), ('license', 'Licence'), ('other', 'Jiné')], db_column='asset_type', max_length=20)),
                ('manufacturer', models.CharField(blank=True, db_column='manufacturer', max_length=100, null=True)),
                ('model', models.CharField(blank=True, db_column='model', max_length=100, null=True)),
                ('serial_number', models.CharField(blank=True, db_column='serial_number', max_length=100, null=True)),
                ('purchase_date', models.DateField(blank=True, db_column='purchase_date', null=True)),
                ('purchase_price', models.DecimalField(blank=True, db_column='purchase_price', decimal_places=2, max_digits=10, null=True)),
                ('warranty_expiry', models.DateField(blank=True, db_column='warranty_expiry', null=True)),
                ('status', models.CharField(choices=[('active', 'Aktivní'), ('in_repair', 'V opravě'), ('stored', 'Uskladněno'), ('disposed', 'Vyřazeno')], db_column='status', default='active', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('assigned_to', models.ForeignKey(blank=True, db_column='assigned_to_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_it_assets', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_it_asset',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='law_document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('document_type', models.CharField(choices=[('contract', 'Smlouva'), ('agreement', 'Dohoda'), ('template', 'Šablona'), ('analysis', 'Analýza'), ('opinion', 'Stanovisko')], max_length=50)),
                ('content', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='law_query',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('question', models.TextField()),
                ('ai_response', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('pending', 'Čeká na zpracování'), ('processing', 'Zpracovává se'), ('completed', 'Dokončeno'), ('failed', 'Chyba')], default='pending', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ListItem',
            fields=[
                ('item_id', models.AutoField(db_column='item_id', primary_key=True, serialize=False)),
                ('content', models.TextField(db_column='content')),
                ('item_order', models.IntegerField(db_column='item_order')),
                ('created', models.DateTimeField(db_column='created', default=django.utils.timezone.now)),
                ('modified', models.DateTimeField(auto_now=True, db_column='modified')),
                ('flist', models.ForeignKey(db_column='list_id', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='fdk_cz.flist')),
            ],
            options={
                'db_table': 'FDK_list_items',
            },
        ),
        migrations.CreateModel(
            name='ListPermission',
            fields=[
                ('list_permission_id', models.AutoField(db_column='list_permission_id', primary_key=True, serialize=False)),
                ('can_edit', models.BooleanField(default=False)),
                ('can_add', models.BooleanField(default=False)),
                ('flist', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='permissions', to='fdk_cz.flist')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='list_permissions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_list_permissions',
            },
        ),
        migrations.CreateModel(
            name='ModuleBundle',
            fields=[
                ('bundle_id', models.AutoField(db_column='bundle_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=100)),
                ('display_name', models.CharField(db_column='display_name', max_length=200)),
                ('description', models.TextField(db_column='description')),
                ('price_monthly', models.DecimalField(db_column='price_monthly', decimal_places=2, max_digits=10)),
                ('price_yearly', models.DecimalField(db_column='price_yearly', decimal_places=2, max_digits=10)),
                ('discount_percentage', models.DecimalField(db_column='discount_percentage', decimal_places=2, default=0, max_digits=5)),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
                ('is_featured', models.BooleanField(db_column='is_featured', default=False)),
                ('icon', models.CharField(blank=True, db_column='icon', max_length=50, null=True)),
                ('color', models.CharField(db_column='color', default='#3b82f6', max_length=7)),
                ('order', models.IntegerField(db_column='order', default=0)),
                ('modules', models.ManyToManyField(related_name='bundles', to='fdk_cz.module')),
            ],
            options={
                'db_table': 'FDK_module_bundle',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='ModuleUsage',
            fields=[
                ('usage_id', models.AutoField(db_column='usage_id', primary_key=True, serialize=False)),
                ('action', models.CharField(db_column='action', max_length=100)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_column='timestamp')),
                ('details', models.JSONField(blank=True, db_column='details', null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, db_column='ip_address', null=True)),
                ('user_agent', models.CharField(blank=True, db_column='user_agent', max_length=255, null=True)),
                ('module', models.ForeignKey(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='usage_logs', to='fdk_cz.module')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='module_usage', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_module_usage',
            },
        ),
        migrations.CreateModel(
            name='Organization',
            fields=[
                ('organization_id', models.AutoField(db_column='organization_id', primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('ico', models.CharField(max_length=20, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_organizations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_organization',
            },
        ),
        migrations.CreateModel(
            name='ITIncident',
            fields=[
                ('incident_id', models.AutoField(db_column='incident_id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(db_column='description')),
                ('incident_number', models.CharField(db_column='incident_number', max_length=50, unique=True)),
                ('priority', models.CharField(choices=[('low', 'Nízká'), ('medium', 'Střední'), ('high', 'Vysoká'), ('critical', 'Kritická')], db_column='priority', default='medium', max_length=20)),
                ('status', models.CharField(choices=[('new', 'Nový'), ('assigned', 'Přiřazeno'), ('in_progress', 'Řešení'), ('resolved', 'Vyřešeno'), ('closed', 'Uzavřeno')], db_column='status', default='new', max_length=20)),
                ('reported_at', models.DateTimeField(auto_now_add=True, db_column='reported_at')),
                ('resolved_at', models.DateTimeField(blank=True, db_column='resolved_at', null=True)),
                ('closed_at', models.DateTimeField(blank=True, db_column='closed_at', null=True)),
                ('resolution_notes', models.TextField(blank=True, db_column='resolution_notes', null=True)),
                ('affected_asset', models.ForeignKey(blank=True, db_column='affected_asset_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incidents', to='fdk_cz.itasset')),
                ('assigned_to', models.ForeignKey(blank=True, db_column='assigned_to_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_incidents', to=settings.AUTH_USER_MODEL)),
                ('reported_by', models.ForeignKey(blank=True, db_column='reported_by_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reported_incidents', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(db_column='organization_id', on_delete=django.db.models.deletion.CASCADE, related_name='it_incidents', to='fdk_cz.organization')),
            ],
            options={
                'db_table': 'FDK_it_incident',
                'ordering': ['-reported_at'],
            },
        ),
        migrations.AddField(
            model_name='itasset',
            name='organization',
            field=models.ForeignKey(db_column='organization_id', on_delete=django.db.models.deletion.CASCADE, related_name='it_assets', to='fdk_cz.organization'),
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('employee_id', models.AutoField(db_column='employee_id', primary_key=True, serialize=False)),
                ('first_name', models.CharField(db_column='first_name', max_length=100)),
                ('last_name', models.CharField(db_column='last_name', max_length=100)),
                ('personal_id_number', models.CharField(blank=True, db_column='personal_id_number', max_length=20, null=True)),
                ('email', models.EmailField(blank=True, db_column='email', max_length=254, null=True)),
                ('phone', models.CharField(blank=True, db_column='phone', max_length=20, null=True)),
                ('position', models.CharField(blank=True, db_column='position', max_length=255, null=True)),
                ('employee_number', models.CharField(blank=True, db_column='employee_number', max_length=50, null=True)),
                ('employment_type', models.CharField(choices=[('full_time', 'Plný úvazek'), ('part_time', 'Částečný úvazek'), ('contract', 'Smlouva'), ('temporary', 'Dočasný'), ('intern', 'Stážista')], db_column='employment_type', max_length=20)),
                ('hire_date', models.DateField(blank=True, db_column='hire_date', null=True)),
                ('termination_date', models.DateField(blank=True, db_column='termination_date', null=True)),
                ('status', models.CharField(choices=[('active', 'Aktivní'), ('on_leave', 'Na dovolené'), ('suspended', 'Pozastaveno'), ('terminated', 'Ukončeno')], db_column='status', default='active', max_length=20)),
                ('salary', models.DecimalField(blank=True, db_column='salary', decimal_places=2, max_digits=10, null=True)),
                ('currency', models.CharField(db_column='currency', default='CZK', max_length=3)),
                ('notes', models.TextField(blank=True, db_column='notes', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('department', models.ForeignKey(blank=True, db_column='department_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employees', to='fdk_cz.department')),
                ('user', models.OneToOneField(blank=True, db_column='user_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employee_profile', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(db_column='organization_id', on_delete=django.db.models.deletion.CASCADE, related_name='employees', to='fdk_cz.organization')),
            ],
            options={
                'db_table': 'FDK_employee',
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.AddField(
            model_name='department',
            name='organization',
            field=models.ForeignKey(db_column='organization_id', on_delete=django.db.models.deletion.CASCADE, related_name='departments', to='fdk_cz.organization'),
        ),
        migrations.CreateModel(
            name='B2BDocument',
            fields=[
                ('document_id', models.AutoField(db_column='document_id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('file_path', models.CharField(blank=True, db_column='file_path', max_length=500, null=True)),
                ('file_url', models.URLField(blank=True, db_column='file_url', null=True)),
                ('file_size', models.IntegerField(blank=True, db_column='file_size', null=True)),
                ('mime_type', models.CharField(blank=True, db_column='mime_type', max_length=100, null=True)),
                ('document_type', models.CharField(db_column='document_type', max_length=100)),
                ('categories', models.CharField(blank=True, db_column='categories', max_length=500, null=True)),
                ('keywords', models.CharField(blank=True, db_column='keywords', max_length=500, null=True)),
                ('version', models.CharField(db_column='version', default='1.0', max_length=20)),
                ('is_latest', models.BooleanField(db_column='is_latest', default=True)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True, db_column='uploaded_at')),
                ('company', models.ForeignKey(blank=True, db_column='company_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='fdk_cz.b2bcompany')),
                ('contract', models.ForeignKey(blank=True, db_column='contract_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='fdk_cz.b2bcontract')),
                ('uploaded_by', models.ForeignKey(blank=True, db_column='uploaded_by_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='uploaded_b2b_documents', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='b2b_documents', to='fdk_cz.organization')),
            ],
            options={
                'db_table': 'FDK_b2b_document',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.AddField(
            model_name='b2bcontract',
            name='organization',
            field=models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='b2b_contracts', to='fdk_cz.organization'),
        ),
        migrations.AddField(
            model_name='b2bcompany',
            name='organization',
            field=models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='b2b_companies', to='fdk_cz.organization'),
        ),
        migrations.CreateModel(
            name='AssetCategory',
            fields=[
                ('category_id', models.AutoField(db_column='category_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('parent_category', models.ForeignKey(blank=True, db_column='parent_category_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sub_categories', to='fdk_cz.assetcategory')),
                ('organization', models.ForeignKey(db_column='organization_id', on_delete=django.db.models.deletion.CASCADE, related_name='asset_categories', to='fdk_cz.organization')),
            ],
            options={
                'db_table': 'FDK_asset_category',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Asset',
            fields=[
                ('asset_id', models.AutoField(db_column='asset_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('asset_number', models.CharField(db_column='asset_number', max_length=100, unique=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('location', models.CharField(blank=True, db_column='location', max_length=255, null=True)),
                ('purchase_date', models.DateField(blank=True, db_column='purchase_date', null=True)),
                ('purchase_price', models.DecimalField(blank=True, db_column='purchase_price', decimal_places=2, max_digits=12, null=True)),
                ('current_value', models.DecimalField(blank=True, db_column='current_value', decimal_places=2, max_digits=12, null=True)),
                ('currency', models.CharField(db_column='currency', default='CZK', max_length=3)),
                ('status', models.CharField(choices=[('active', 'Aktivní'), ('maintenance', 'Údržba'), ('stored', 'Uskladněno'), ('disposed', 'Vyřazeno'), ('sold', 'Prodáno')], db_column='status', default='active', max_length=20)),
                ('notes', models.TextField(blank=True, db_column='notes', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('responsible_person', models.ForeignKey(blank=True, db_column='responsible_person_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='responsible_assets', to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(blank=True, db_column='category_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assets', to='fdk_cz.assetcategory')),
                ('organization', models.ForeignKey(db_column='organization_id', on_delete=django.db.models.deletion.CASCADE, related_name='assets', to='fdk_cz.organization')),
            ],
            options={
                'db_table': 'FDK_asset',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='OrganizationMembership',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(choices=[('admin', 'Admin'), ('member', 'Člen'), ('viewer', 'Pozorovatel')], max_length=20)),
                ('joined_at', models.DateTimeField(auto_now_add=True)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='fdk_cz.organization')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_organization_membership',
            },
        ),
        migrations.AddField(
            model_name='organization',
            name='members',
            field=models.ManyToManyField(through='fdk_cz.OrganizationMembership', to=settings.AUTH_USER_MODEL),
        ),
        migrations.CreateModel(
            name='Project',
            fields=[
                ('project_id', models.AutoField(db_column='project_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('url', models.CharField(blank=True, db_column='url', max_length=255, null=True)),
                ('public', models.BooleanField(db_column='public', default=False)),
                ('start_date', models.DateField(blank=True, db_column='start_date', null=True)),
                ('end_date', models.DateField(blank=True, db_column='end_date', null=True)),
                ('created', models.DateTimeField(blank=True, db_column='created', null=True)),
                ('owner', models.ForeignKey(db_column='owner_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='owned_projects', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_projects',
            },
        ),
        migrations.AddField(
            model_name='grantapplication',
            name='project',
            field=models.ForeignKey(blank=True, db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='grant_applications', to='fdk_cz.project'),
        ),
        migrations.AddField(
            model_name='flist',
            name='project',
            field=models.ForeignKey(blank=True, db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lists', to='fdk_cz.project'),
        ),
        migrations.CreateModel(
            name='Contract',
            fields=[
                ('contract_id', models.AutoField(db_column='contract_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('start_date', models.DateField(blank=True, db_column='start_date', null=True)),
                ('end_date', models.DateField(blank=True, db_column='end_date', null=True)),
                ('document', models.FileField(blank=True, null=True, upload_to='contracts/')),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='contracts', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_contract',
            },
        ),
        migrations.CreateModel(
            name='Contact',
            fields=[
                ('contact_id', models.AutoField(db_column='contact_id', primary_key=True, serialize=False)),
                ('first_name', models.CharField(db_column='first_name', max_length=100)),
                ('last_name', models.CharField(blank=True, db_column='last_name', max_length=100, null=True)),
                ('phone', models.CharField(blank=True, db_column='phone', max_length=20, null=True)),
                ('email', models.EmailField(blank=True, db_column='email', max_length=255, null=True)),
                ('company', models.CharField(blank=True, db_column='company', max_length=255, null=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('added_on', models.DateTimeField(auto_now_add=True, db_column='added_on')),
                ('last_contacted', models.DateTimeField(blank=True, db_column='last_contacted', null=True)),
                ('is_private', models.BooleanField(db_column='is_private', default=True)),
                ('account', models.ForeignKey(blank=True, db_column='account_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contacts', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contacts', to='fdk_cz.organization')),
                ('project', models.ForeignKey(blank=True, db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contacts', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_contacts',
            },
        ),
        migrations.AddField(
            model_name='b2bcontract',
            name='project',
            field=models.ForeignKey(blank=True, db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='b2b_contracts', to='fdk_cz.project'),
        ),
        migrations.CreateModel(
            name='ProjectCategory',
            fields=[
                ('category_id', models.AutoField(db_column='category_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('language', models.CharField(blank=True, db_column='language', max_length=2, null=True)),
                ('project', models.ForeignKey(db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='categories', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_categories',
            },
        ),
        migrations.CreateModel(
            name='ProjectDocument',
            fields=[
                ('document_id', models.AutoField(db_column='document_id', primary_key=True, serialize=False)),
                ('document_type', models.CharField(db_column='document_type', max_length=255)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('url', models.CharField(db_column='url', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('file_path', models.CharField(db_column='file_path', max_length=255)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True, db_column='uploaded_at')),
                ('category', models.ForeignKey(blank=True, db_column='category', null=True, on_delete=django.db.models.deletion.SET_NULL, to='fdk_cz.projectcategory')),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='fdk_cz.project')),
                ('uploaded_by', models.ForeignKey(db_column='uploaded_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='uploaded_documents', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_documents',
            },
        ),
        migrations.CreateModel(
            name='ProjectMilestone',
            fields=[
                ('milestone_id', models.AutoField(db_column='milestone_id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('due_date', models.DateField(blank=True, db_column='due_date', null=True)),
                ('status', models.CharField(db_column='status', default='planned', max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='milestones', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_milestones',
            },
        ),
        migrations.CreateModel(
            name='ProjectRolePermission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('permission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='fdk_cz.projectpermission')),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='permissions', to='fdk_cz.projectrole')),
            ],
            options={
                'db_table': 'FDK_role_permisssions',
            },
        ),
        migrations.CreateModel(
            name='ProjectTask',
            fields=[
                ('task_id', models.AutoField(db_column='task_id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('priority', models.CharField(blank=True, db_column='priority', max_length=16, null=True)),
                ('status', models.CharField(blank=True, db_column='status', max_length=50, null=True)),
                ('due_date', models.DateField(blank=True, db_column='due_date', null=True)),
                ('created', models.DateTimeField(blank=True, db_column='created', null=True)),
                ('assigned', models.ForeignKey(db_column='assigned_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_tasks', to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(db_column='category_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='fdk_cz.projectcategory')),
                ('creator', models.ForeignKey(db_column='creator_id', on_delete=django.db.models.deletion.CASCADE, related_name='created_tasks', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tasks', to='fdk_cz.company')),
                ('parent', models.ForeignKey(blank=True, db_column='parent_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subtasks', to='fdk_cz.projecttask')),
                ('project', models.ForeignKey(db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tasks', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_tasks',
            },
        ),
        migrations.CreateModel(
            name='ProjectComment',
            fields=[
                ('comment_id', models.AutoField(db_column='comment_id', primary_key=True, serialize=False)),
                ('comment', models.TextField(blank=True, db_column='comment', null=True)),
                ('posted', models.DateTimeField(blank=True, db_column='posted', null=True)),
                ('project', models.ForeignKey(db_column='project_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='comments', to='fdk_cz.project')),
                ('user', models.ForeignKey(db_column='user_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='comments', to=settings.AUTH_USER_MODEL)),
                ('task', models.ForeignKey(db_column='task_id', on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='fdk_cz.projecttask')),
            ],
            options={
                'db_table': 'FDK_comments',
            },
        ),
        migrations.CreateModel(
            name='ProjectAttachment',
            fields=[
                ('attachment_id', models.AutoField(db_column='attachment_id', primary_key=True, serialize=False)),
                ('file_name', models.CharField(db_column='file_name', max_length=255)),
                ('file_path', models.CharField(db_column='file_path', max_length=255)),
                ('uploaded_date', models.DateTimeField(blank=True, db_column='uploaded_date', null=True)),
                ('uploaded_by', models.ForeignKey(db_column='uploaded_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='uploaded_attachments', to=settings.AUTH_USER_MODEL)),
                ('task', models.ForeignKey(db_column='task_id', on_delete=django.db.models.deletion.CASCADE, related_name='attachments', to='fdk_cz.projecttask')),
            ],
            options={
                'db_table': 'FDK_attachments',
            },
        ),
        migrations.CreateModel(
            name='ProjectUser',
            fields=[
                ('project_user_id', models.AutoField(db_column='project_user_id', primary_key=True, serialize=False)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='project_users', to='fdk_cz.project')),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='user_roles', to='fdk_cz.projectrole')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='user_projects', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_project_user',
            },
        ),
        migrations.CreateModel(
            name='Risk',
            fields=[
                ('risk_id', models.AutoField(db_column='risk_id', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(db_column='description')),
                ('category', models.CharField(choices=[('technical', 'Technické'), ('financial', 'Finanční'), ('operational', 'Provozní'), ('strategic', 'Strategické'), ('legal', 'Právní'), ('security', 'Bezpečnostní'), ('other', 'Jiné')], db_column='category', max_length=20)),
                ('probability', models.IntegerField(choices=[(1, 'Velmi nízká'), (2, 'Nízká'), (3, 'Střední'), (4, 'Vysoká'), (5, 'Velmi vysoká')], db_column='probability', default=3)),
                ('impact', models.IntegerField(choices=[(1, 'Zanedbatelný'), (2, 'Malý'), (3, 'Střední'), (4, 'Velký'), (5, 'Kritický')], db_column='impact', default=3)),
                ('risk_score', models.IntegerField(db_column='risk_score', default=9)),
                ('mitigation_strategy', models.TextField(blank=True, db_column='mitigation_strategy', null=True)),
                ('contingency_plan', models.TextField(blank=True, db_column='contingency_plan', null=True)),
                ('status', models.CharField(choices=[('identified', 'Identifikováno'), ('assessed', 'Vyhodnoceno'), ('mitigated', 'Zmírněno'), ('accepted', 'Akceptováno'), ('closed', 'Uzavřeno')], db_column='status', default='identified', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('created_by', models.ForeignKey(blank=True, db_column='created_by_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_risks', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='risks', to='fdk_cz.organization')),
                ('owner', models.ForeignKey(blank=True, db_column='owner_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='owned_risks', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(blank=True, db_column='project_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='risks', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_risk',
                'ordering': ['-risk_score', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Test',
            fields=[
                ('test_id', models.AutoField(db_column='test_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('grid_location', models.CharField(blank=True, db_column='grid_location', max_length=2, null=True)),
                ('date_created', models.DateTimeField(auto_now_add=True, db_column='date_created')),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='tests', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_tests',
            },
        ),
        migrations.CreateModel(
            name='TestResult',
            fields=[
                ('test_result_id', models.AutoField(db_column='test_result_id', primary_key=True, serialize=False)),
                ('result', models.CharField(db_column='result', max_length=50)),
                ('execution_date', models.DateTimeField(auto_now_add=True, db_column='execution_date')),
                ('executed_by', models.ForeignKey(blank=True, db_column='executed_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='executed_tests', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='test_results', to='fdk_cz.project')),
                ('test', models.ForeignKey(db_column='test_id', on_delete=django.db.models.deletion.CASCADE, related_name='results', to='fdk_cz.test')),
            ],
            options={
                'db_table': 'FDK_test_results',
            },
        ),
        migrations.CreateModel(
            name='TestError',
            fields=[
                ('test_error_id', models.AutoField(db_column='test_error_id', primary_key=True, serialize=False)),
                ('error_title', models.CharField(db_column='error_title', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('steps_to_replicate', models.TextField(blank=True, db_column='steps_to_replicate', null=True)),
                ('status', models.CharField(choices=[('open', 'Otevřená'), ('closed', 'Uzavřená'), ('in_progress', 'V procesu')], default='open', max_length=50)),
                ('date_created', models.DateTimeField(auto_now_add=True, db_column='date_created')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_errors', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='test_errors', to='fdk_cz.project')),
                ('test_result', models.ForeignKey(db_column='test_result_id', on_delete=django.db.models.deletion.CASCADE, related_name='errors', to='fdk_cz.testresult')),
            ],
            options={
                'db_table': 'FDK_test_errors',
            },
        ),
        migrations.CreateModel(
            name='TestType',
            fields=[
                ('test_type_id', models.AutoField(db_column='test_type_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('project', models.ForeignKey(db_column='project_id', on_delete=django.db.models.deletion.CASCADE, related_name='test_types', to='fdk_cz.project')),
            ],
            options={
                'db_table': 'FDK_test_types',
            },
        ),
        migrations.AddField(
            model_name='test',
            name='test_type',
            field=models.ForeignKey(db_column='test_type_id', on_delete=django.db.models.deletion.CASCADE, related_name='tests', to='fdk_cz.testtype'),
        ),
        migrations.CreateModel(
            name='UserModuleSubscription',
            fields=[
                ('subscription_id', models.AutoField(db_column='subscription_id', primary_key=True, serialize=False)),
                ('subscription_type', models.CharField(choices=[('free', 'Zdarma'), ('monthly', 'Měsíční'), ('yearly', 'Roční'), ('lifetime', 'Doživotní'), ('trial', 'Zkušební')], db_column='subscription_type', max_length=20)),
                ('start_date', models.DateTimeField(auto_now_add=True, db_column='start_date')),
                ('end_date', models.DateTimeField(blank=True, db_column='end_date', null=True)),
                ('trial_end_date', models.DateTimeField(blank=True, db_column='trial_end_date', null=True)),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
                ('auto_renew', models.BooleanField(db_column='auto_renew', default=True)),
                ('payment_method', models.CharField(blank=True, db_column='payment_method', max_length=50, null=True)),
                ('external_subscription_id', models.CharField(blank=True, db_column='external_subscription_id', max_length=255, null=True)),
                ('notes', models.TextField(blank=True, db_column='notes', null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, db_column='cancelled_at', null=True)),
                ('cancellation_reason', models.TextField(blank=True, db_column='cancellation_reason', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('module', models.ForeignKey(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='user_subscriptions', to='fdk_cz.module')),
                ('organization', models.ForeignKey(blank=True, db_column='organization_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='module_subscriptions', to='fdk_cz.organization')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='module_subscriptions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_user_module_subscription',
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('payment_id', models.AutoField(db_column='payment_id', primary_key=True, serialize=False)),
                ('amount', models.DecimalField(db_column='amount', decimal_places=2, max_digits=10)),
                ('currency', models.CharField(db_column='currency', default='CZK', max_length=3)),
                ('status', models.CharField(choices=[('pending', 'Čeká na zpracování'), ('completed', 'Dokončeno'), ('failed', 'Selhalo'), ('refunded', 'Vráceno'), ('cancelled', 'Zrušeno')], db_column='status', default='pending', max_length=20)),
                ('payment_method', models.CharField(db_column='payment_method', max_length=50)),
                ('external_payment_id', models.CharField(blank=True, db_column='external_payment_id', max_length=255, null=True)),
                ('invoice_number', models.CharField(blank=True, db_column='invoice_number', max_length=50, null=True)),
                ('invoice_url', models.URLField(blank=True, db_column='invoice_url', null=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('metadata', models.JSONField(db_column='metadata', default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('completed_at', models.DateTimeField(blank=True, db_column='completed_at', null=True)),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='payments', to=settings.AUTH_USER_MODEL)),
                ('subscription', models.ForeignKey(blank=True, db_column='subscription_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payments', to='fdk_cz.usermodulesubscription')),
            ],
            options={
                'db_table': 'FDK_payment',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WarehouseItem',
            fields=[
                ('item_id', models.AutoField(db_column='item_id', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('quantity', models.PositiveIntegerField(db_column='quantity', default=0)),
                ('created', models.DateTimeField(auto_now_add=True, db_column='created')),
                ('warehouse', models.ForeignKey(db_column='warehouse_id', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='fdk_cz.warehouse')),
            ],
            options={
                'db_table': 'FDK_warehouse_item',
            },
        ),
        migrations.CreateModel(
            name='WarehouseTransaction',
            fields=[
                ('transaction_id', models.AutoField(db_column='transaction_id', primary_key=True, serialize=False)),
                ('transaction_type', models.CharField(choices=[('IN', 'Příjem'), ('OUT', 'Výdej')], db_column='transaction_type', max_length=10)),
                ('quantity', models.PositiveIntegerField(db_column='quantity')),
                ('date', models.DateTimeField(auto_now_add=True, db_column='date')),
                ('item', models.ForeignKey(db_column='item_id', on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='fdk_cz.warehouseitem')),
            ],
            options={
                'db_table': 'FDK_warehouse_transaction',
            },
        ),
        migrations.CreateModel(
            name='GrantOpportunityBookmark',
            fields=[
                ('bookmark_id', models.AutoField(db_column='bookmark_id', primary_key=True, serialize=False)),
                ('notes', models.TextField(blank=True, db_column='notes', help_text='Osobní poznámky k příležitosti', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('call', models.ForeignKey(db_column='call_id', on_delete=django.db.models.deletion.CASCADE, related_name='bookmarks', to='fdk_cz.grantcall')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='grant_bookmarks', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'FDK_grant_opportunity_bookmark',
                'unique_together': {('user', 'call')},
            },
        ),
        migrations.AddIndex(
            model_name='grantcall',
            index=models.Index(fields=['external_id'], name='FDK_grant_c_externa_1f2780_idx'),
        ),
        migrations.AddIndex(
            model_name='grantcall',
            index=models.Index(fields=['source', 'is_active'], name='FDK_grant_c_source_6bc4f0_idx'),
        ),
        migrations.AddIndex(
            model_name='grantcall',
            index=models.Index(fields=['-priority', '-published_at'], name='FDK_grant_c_priorit_89f8b7_idx'),
        ),
        migrations.AddIndex(
            model_name='grantcall',
            index=models.Index(fields=['status', 'end_date'], name='FDK_grant_c_status_d5cb7c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='listpermission',
            unique_together={('flist', 'user')},
        ),
        migrations.AddIndex(
            model_name='moduleusage',
            index=models.Index(fields=['user', 'timestamp'], name='FDK_module__user_id_9423b8_idx'),
        ),
        migrations.AddIndex(
            model_name='moduleusage',
            index=models.Index(fields=['module', 'timestamp'], name='FDK_module__module__ce81da_idx'),
        ),
        migrations.AddIndex(
            model_name='grantapplication',
            index=models.Index(fields=['lifecycle_stage', '-created_at'], name='FDK_grant_a_lifecyc_d2a595_idx'),
        ),
        migrations.AddIndex(
            model_name='grantapplication',
            index=models.Index(fields=['report_deadline'], name='FDK_grant_a_report__e2545a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='projectrolepermission',
            unique_together={('role', 'permission')},
        ),
        migrations.AlterUniqueTogether(
            name='projectuser',
            unique_together={('project', 'user')},
        ),
        migrations.AddIndex(
            model_name='usermodulesubscription',
            index=models.Index(fields=['user', 'is_active'], name='FDK_user_mo_user_id_26102e_idx'),
        ),
        migrations.AddIndex(
            model_name='usermodulesubscription',
            index=models.Index(fields=['end_date'], name='FDK_user_mo_end_dat_d6ba62_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='usermodulesubscription',
            unique_together={('user', 'module')},
        ),
    ]
