{% extends "base.html" %}
{% block title %}Smazat oddÄ›lenÃ­ {{ department.name }} | FDK.cz{% endblock %}
{% block header_title %}ğŸ—‘ï¸ Smazat oddÄ›lenÃ­{% endblock %}
{% block header_subtitle %}PotvrzenÃ­ smazÃ¡nÃ­{% endblock %}

{% block context_breadcrumbs %}
  <a href="{% url 'hr_dashboard' %}" class="breadcrumb-link">HR</a>
  <span class="breadcrumb-sep">â†’</span>
  <a href="{% url 'list_departments' %}" class="breadcrumb-link">OddÄ›lenÃ­</a>
  <span class="breadcrumb-sep">â†’</span>
  <span style="font-weight: 600; color: #1e293b;">{{ department.name }}</span>
  <span class="breadcrumb-sep">â†’</span>
  <span style="font-weight: 600; color: #1e293b;">Smazat</span>
{% endblock %}

{% block content %}

<div style="max-width: 600px; margin: 0 auto;">
  <div class="content-card">
    <div style="background: #fef2f2; border-left: 4px solid #dc2626; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
      <h3 style="color: #991b1b; font-weight: 600; margin-bottom: 0.5rem;">âš ï¸ VarovÃ¡nÃ­</h3>
      <p style="color: #7f1d1d; margin: 0;">
        Opravdu chcete smazat oddÄ›lenÃ­ <strong>{{ department.name }}</strong>?
        Tato akce je nevratnÃ¡.
      </p>
    </div>

    <div style="background: #f9fafb; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
      <h4 style="font-weight: 600; margin-bottom: 1rem; color: #1e293b;">Detail oddÄ›lenÃ­:</h4>

      <div style="display: grid; gap: 0.75rem;">
        <div>
          <label style="font-size: 0.875rem; font-weight: 600; color: #64748b;">NÃ¡zev:</label>
          <p style="color: #1e293b; margin: 0.25rem 0 0 0;">{{ department.name }}</p>
        </div>

        <div>
          <label style="font-size: 0.875rem; font-weight: 600; color: #64748b;">Organizace:</label>
          <p style="color: #1e293b; margin: 0.25rem 0 0 0;">{{ department.organization.name }}</p>
        </div>

        {% if department.manager %}
        <div>
          <label style="font-size: 0.875rem; font-weight: 600; color: #64748b;">ManaÅ¾er:</label>
          <p style="color: #1e293b; margin: 0.25rem 0 0 0;">{{ department.manager.get_full_name|default:department.manager.username }}</p>
        </div>
        {% endif %}

        <div>
          <label style="font-size: 0.875rem; font-weight: 600; color: #64748b;">PoÄet zamÄ›stnancÅ¯:</label>
          <p style="color: #1e293b; margin: 0.25rem 0 0 0;">{{ department.employees.count }}</p>
        </div>

        {% if department.sub_departments.all %}
        <div>
          <label style="font-size: 0.875rem; font-weight: 600; color: #64748b;">PodÅ™Ã­zenÃ¡ oddÄ›lenÃ­:</label>
          <p style="color: #1e293b; margin: 0.25rem 0 0 0;">{{ department.sub_departments.count }}</p>
        </div>
        {% endif %}
      </div>
    </div>

    {% if department.employees.count > 0 %}
    <div style="background: #fffbeb; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
      <p style="color: #92400e; margin: 0; font-size: 0.875rem;">
        <strong>UpozornÄ›nÃ­:</strong> Toto oddÄ›lenÃ­ mÃ¡ {{ department.employees.count }} zamÄ›stnancÅ¯.
        Po smazÃ¡nÃ­ budou tito zamÄ›stnanci bez pÅ™iÅ™azenÃ©ho oddÄ›lenÃ­.
      </p>
    </div>
    {% endif %}

    <form method="POST">
      {% csrf_token %}
      <div style="display: flex; gap: 0.75rem; justify-content: flex-end;">
        <a href="{% url 'detail_department' department.department_id %}" class="btn btn-outline">ZruÅ¡it</a>
        <button type="submit" class="btn btn-primary" style="background: #dc2626; border-color: #dc2626;">
          ğŸ—‘ï¸ Ano, smazat oddÄ›lenÃ­
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
