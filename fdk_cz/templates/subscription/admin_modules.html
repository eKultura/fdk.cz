{% extends "base.html" %}
{% block title %}Admin - SprÃ¡va modulÅ¯ | FDK.cz{% endblock %}
{% block header_title %}ğŸ”§ SprÃ¡va modulÅ¯{% endblock %}
{% block header_subtitle %}Administrace modulÅ¯ a cen{% endblock %}

{% block context_breadcrumbs %}
{% include 'inc/org_context_breadcrumb.html' %}
<span class="breadcrumb-sep">â†’</span>
<span class="breadcrumb-link">Administrace</span>
<span class="breadcrumb-sep">â†’</span>
<span class="breadcrumb-link">Moduly</span>
<span class="breadcrumb-sep">â†’</span>
<span style="font-weight: 600; color: #1e293b;">SprÃ¡va modulÅ¯</span>
{% endblock %}

{% block content %}

<div style="max-width: 1600px; margin: 0 auto;">

  <!-- Actions -->
  <div style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
    <a href="{% url 'admin_assign_module' %}" class="btn btn-primary">â• PÅ™iÅ™adit modul uÅ¾ivateli</a>
    <a href="{% url 'admin_subscriptions' %}" class="btn btn-outline">ğŸ“‹ VÅ¡echna pÅ™edplatnÃ¡</a>
    <a href="{% url 'subscription_pricing' %}" class="btn btn-outline">ğŸ’° VeÅ™ejnÃ½ cenÃ­k</a>
  </div>

  <!-- Modules Table -->
  <div class="content-card">
    <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: #1e293b;">ğŸ“¦ Seznam modulÅ¯</h2>

    {% if modules %}
    <div style="overflow-x: auto;">
      <table class="data-table">
        <thead>
          <tr>
            <th style="text-align: center;">PoÅ™adÃ­</th>
            <th>NÃ¡zev modulu</th>
            <th style="text-align: right;">Cena mÄ›sÃ­ÄnÄ›</th>
            <th style="text-align: right;">Cena roÄnÄ›</th>
            <th style="text-align: center;">AktivnÃ­</th>
            <th style="text-align: center;">Zdarma</th>
            <th style="text-align: center;">OdbÄ›ratelÅ¯</th>
            <th style="text-align: center;">Akce</th>
          </tr>
        </thead>
        <tbody>
          {% for module in modules %}
          <tr>
            <td style="text-align: center;">
              <span style="display: inline-block; background: #f1f5f9; padding: 4px 12px; border-radius: 6px; font-weight: 600; color: #475569;">{{ module.order }}</span>
            </td>
            <td>
              <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">{{ module.display_name }}</div>
              <div style="font-size: 0.75rem; color: #64748b; font-family: monospace;">{{ module.name }}</div>
            </td>
            <td style="text-align: right;">
              {% if module.is_free %}
                <span style="color: #10b981; font-weight: 700;">ZDARMA</span>
              {% else %}
                <span style="font-weight: 600; color: #1e293b;">{{ module.price_monthly }} KÄ</span>
              {% endif %}
            </td>
            <td style="text-align: right;">
              {% if module.is_free %}
                <span style="color: #10b981; font-weight: 700;">ZDARMA</span>
              {% else %}
                <span style="font-weight: 600; color: #1e293b;">{{ module.price_yearly }} KÄ</span>
              {% endif %}
            </td>
            <td style="text-align: center;">
              {% if module.is_active %}
                <span style="padding: 4px 12px; background: #d1fae5; color: #065f46; border-radius: 12px; font-weight: 600; font-size: 0.75rem; white-space: nowrap;">âœ“ AktivnÃ­</span>
              {% else %}
                <span style="padding: 4px 12px; background: #fee2e2; color: #991b1b; border-radius: 12px; font-weight: 600; font-size: 0.75rem; white-space: nowrap;">âœ— NeaktivnÃ­</span>
              {% endif %}
            </td>
            <td style="text-align: center;">
              {% if module.is_free %}
                <span style="padding: 4px 12px; background: #dbeafe; color: #1e40af; border-radius: 12px; font-weight: 600; font-size: 0.75rem;">âœ“ Ano</span>
              {% else %}
                <span style="color: #cbd5e1;">â€”</span>
              {% endif %}
            </td>
            <td style="text-align: center;">
              <span style="font-weight: 700; color: #3b82f6; font-size: 1.125rem;">{{ module.subscribers_count|default:0 }}</span>
            </td>
            <td style="text-align: center;">
              <a href="{% url 'admin_edit_module' module.module_id %}" class="btn btn-sm btn-outline" style="padding: 4px 12px; white-space: nowrap;">âœï¸ Upravit</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; background: #f8fafc; border-radius: 8px;">
      <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“¦</div>
      <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 0.5rem;">Å½Ã¡dnÃ© moduly</h3>
      <p style="color: #64748b; margin-bottom: 0.5rem;">Nejsou Å¾Ã¡dnÃ© moduly k zobrazenÃ­.</p>
      <p style="color: #64748b; font-family: monospace; font-size: 0.875rem; background: #f1f5f9; padding: 0.5rem 1rem; border-radius: 6px; display: inline-block;">python manage.py init_modules</p>
    </div>
    {% endif %}
  </div>

  <!-- Instructions -->
  <div class="content-card" style="margin-top: 1.5rem;">
    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; color: #1e293b;">â„¹ï¸ NÃ¡povÄ›da</h3>
    <ul style="list-style: disc; padding-left: 1.5rem; display: grid; gap: 0.5rem; color: #475569; font-size: 0.875rem;">
      <li><strong>Upravit</strong> - ZmÄ›nit ceny, nÃ¡zev nebo aktivaci modulu</li>
      <li><strong>PÅ™iÅ™adit modul</strong> - PÅ™idat pÅ™edplatnÃ© konkrÃ©tnÃ­mu uÅ¾ivateli (bez platby)</li>
      <li><strong>VÅ¡echna pÅ™edplatnÃ¡</strong> - Zobrazit seznam vÅ¡ech aktivnÃ­ch/neaktivnÃ­ch pÅ™edplatnÃ½ch</li>
      <li><strong>Zdarma</strong> - Moduly dostupnÃ© vÅ¡em bez pÅ™edplatnÃ©ho</li>
    </ul>
  </div>

</div>
{% endblock %}
