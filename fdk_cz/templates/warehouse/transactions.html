{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Transakce skladu" %} | FDK.cz{% endblock %}
{% block header_title %}ğŸ“Š {% trans "Transakce skladu" %} {{ store.name }}{% endblock %}
{% block header_subtitle %}{% trans "Historie vÅ¡ech skladovÃ½ch pohybÅ¯" %}{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">

  <!-- Actions -->
  <div style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem;">
    <a href="{% url 'create_transaction' store.id %}" class="btn btn-primary">â• {% trans "PÅ™idat transakci" %}</a>
    <a href="{% url 'store_detail' store.id %}" class="btn btn-outline">â† {% trans "ZpÄ›t na detail skladu" %}</a>
  </div>

  <!-- Transactions List -->
  <div class="content-card">
    <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; color: #1e293b;">ğŸ“‹ {% trans "Seznam transakcÃ­" %}</h3>

    {% if transactions %}
    <div style="display: grid; gap: 0.75rem;">
      {% for transaction in transactions %}
      <a href="{% url 'transaction_detail' transaction.id %}" style="text-decoration: none; display: block; padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 4px solid {% if transaction.type == 'in' %}#10b981{% else %}#ef4444{% endif %}; transition: all 0.2s;" onmouseover="this.style.background='#f1f5f9'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)'" onmouseout="this.style.background='#f8fafc'; this.style.boxShadow='none'">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
              <span style="padding: 4px 12px; background: {% if transaction.type == 'in' %}#d1fae5{% else %}#fee2e2{% endif %}; color: {% if transaction.type == 'in' %}#065f46{% else %}#991b1b{% endif %}; border-radius: 12px; font-weight: 600; font-size: 0.75rem;">
                {% if transaction.type == 'in' %}â¬†ï¸ {% trans "PÅ™Ã­jem" %}{% else %}â¬‡ï¸ {% trans "VÃ½dej" %}{% endif %}
              </span>
              <span style="font-weight: 600; color: #1e293b; font-size: 1.125rem;">{{ transaction.amount }}</span>
            </div>
            {% if transaction.description %}
            <div style="color: #64748b; font-size: 0.875rem;">{{ transaction.description }}</div>
            {% endif %}
          </div>
          <div style="text-align: right;">
            <div style="color: #64748b; font-size: 0.875rem;">{{ transaction.created_at|date:"d.m.Y H:i" }}</div>
            {% if transaction.user %}
            <div style="color: #94a3b8; font-size: 0.75rem;">ğŸ‘¤ {{ transaction.user.username }}</div>
            {% endif %}
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; background: #f8fafc; border-radius: 8px;">
      <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“Š</div>
      <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 0.5rem;">{% trans "Å½Ã¡dnÃ© transakce" %}</h3>
      <p style="color: #64748b; margin-bottom: 1.5rem;">{% trans "ZatÃ­m nebyly provedeny Å¾Ã¡dnÃ© skladovÃ© pohyby." %}</p>
      <a href="{% url 'create_transaction' store.id %}" class="btn btn-primary">â• {% trans "PÅ™idat prvnÃ­ transakci" %}</a>
    </div>
    {% endif %}
  </div>

</div>
{% endblock %}
