{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Transakce skladu" %} | FDK.cz{% endblock %}
{% block header_title %}ğŸ“Š {% trans "Transakce skladu" %} {{ store.name }}{% endblock %}
{% block header_subtitle %}{% trans "Historie vÅ¡ech skladovÃ½ch pohybÅ¯" %}{% endblock %}

{% block content %}
<!-- Breadcrumbs -->
<div style="margin-bottom: 1.5rem; background: linear-gradient(to right, #eff6ff, #eef2ff); border: 2px solid #bfdbfe; border-radius: 8px; padding: 1rem;">
  <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; flex-wrap: wrap;">
    <span style="color: #64748b;">ğŸ“ Kontext:</span>
    {% if store.organization %}
    <a href="{% url 'organization_detail' store.organization.organization_id %}" style="color: #3b82f6; text-decoration: none; font-weight: 500;">{{ store.organization.name }}</a>
    {% elif store.project %}
    {% if store.project.organization %}
    <a href="{% url 'organization_detail' store.project.organization.organization_id %}" style="color: #3b82f6; text-decoration: none; font-weight: 500;">{{ store.project.organization.name }}</a>
    <span style="color: #9ca3af;">â†’</span>
    {% endif %}
    <a href="{% url 'detail_project' store.project.project_id %}" style="color: #3b82f6; text-decoration: none; font-weight: 500;">{{ store.project.name }}</a>
    {% else %}
    <span style="font-weight: 500; color: #1e293b;">OsobnÃ­</span>
    {% endif %}
    <span style="color: #9ca3af;">â†’</span>
    <a href="{% url 'all_stores' %}" style="color: #3b82f6; text-decoration: none; font-weight: 500;">Sklad</a>
    <span style="color: #9ca3af;">â†’</span>
    <a href="{% url 'store_detail' store.warehouse_id %}" style="color: #3b82f6; text-decoration: none; font-weight: 500;">{{ store.name }}</a>
    <span style="color: #9ca3af;">â†’</span>
    <span style="font-weight: 600; color: #1e293b;">Transakce</span>
  </div>
</div>

<div style="max-width: 1200px; margin: 0 auto;">

  <!-- Actions -->
  <div style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem;">
    <a href="{% url 'create_transaction' store.warehouse_id %}" class="btn btn-primary">â• {% trans "PÅ™idat transakci" %}</a>
    <a href="{% url 'store_detail' store.warehouse_id %}" class="btn btn-outline">â† {% trans "ZpÄ›t na detail skladu" %}</a>
  </div>

  <!-- Transactions List -->
  <div class="content-card">
    <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; color: #1e293b;">ğŸ“‹ {% trans "Seznam transakcÃ­" %}</h3>

    {% if transactions %}
    <div style="display: grid; gap: 0.75rem;">
      {% for transaction in transactions %}
      <a href="{% url 'transaction_detail' transaction.transaction_id %}" style="text-decoration: none; display: block; padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 4px solid {% if transaction.transaction_type == 'IN' %}#10b981{% else %}#ef4444{% endif %}; transition: all 0.2s;" onmouseover="this.style.background='#f1f5f9'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)'" onmouseout="this.style.background='#f8fafc'; this.style.boxShadow='none'">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
              <span style="padding: 4px 12px; background: {% if transaction.transaction_type == 'IN' %}#d1fae5{% else %}#fee2e2{% endif %}; color: {% if transaction.transaction_type == 'IN' %}#065f46{% else %}#991b1b{% endif %}; border-radius: 12px; font-weight: 600; font-size: 0.75rem;">
                {% if transaction.transaction_type == 'IN' %}â¬†ï¸ {% trans "PÅ™Ã­jem" %}{% else %}â¬‡ï¸ {% trans "VÃ½dej" %}{% endif %}
              </span>
              <span style="font-weight: 600; color: #1e293b; font-size: 1.125rem;">{{ transaction.item.name }} - {{ transaction.quantity }}x</span>
            </div>
          </div>
          <div style="text-align: right;">
            <div style="color: #64748b; font-size: 0.875rem;">{{ transaction.date|date:"d.m.Y H:i" }}</div>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; background: #f8fafc; border-radius: 8px;">
      <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ“Š</div>
      <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 0.5rem;">{% trans "Å½Ã¡dnÃ© transakce" %}</h3>
      <p style="color: #64748b; margin-bottom: 1.5rem;">{% trans "ZatÃ­m nebyly provedeny Å¾Ã¡dnÃ© skladovÃ© pohyby." %}</p>
      <a href="{% url 'create_transaction' store.warehouse_id %}" class="btn btn-primary">â• {% trans "PÅ™idat prvnÃ­ transakci" %}</a>
    </div>
    {% endif %}
  </div>

</div>
{% endblock %}
