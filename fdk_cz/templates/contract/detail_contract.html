{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ contract.name }} | FDK.cz{% endblock %}
{% block header_title %}ğŸ“„ {{ contract.name }}{% endblock %}
{% block header_subtitle %}Detail smlouvy{% endblock %}

{% block context_breadcrumbs %}
{% if contract.project and contract.project.organization %}
  <a href="{% url 'organization_detail' contract.project.organization.organization_id %}" class="breadcrumb-link">{{ contract.project.organization.name }}</a>
{% else %}
  {% include 'inc/org_context_breadcrumb.html' %}
{% endif %}
<span class="breadcrumb-sep">â†’</span>
<a href="{% url 'list_contracts' %}" class="breadcrumb-link">Smlouvy</a>
<span class="breadcrumb-sep">â†’</span>
<span style="font-weight: 600; color: #1e293b;">{{ contract.name }}</span>
{% endblock %}

{% block content %}

<div style="max-width: 1000px; margin: 0 auto;">

  <!-- Actions -->
  <div style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem;">
    <a href="{% url 'edit_contract' contract.pk %}" class="btn btn-primary">ğŸ“ Upravit</a>
    <a href="{% url 'list_contracts' %}" class="btn btn-outline">â† ZpÄ›t na seznam</a>
  </div>

  <!-- Contract Details -->
  <div class="content-card">
    <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; color: #1e293b;">ğŸ“‹ Informace o smlouvÄ›</h3>

    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
      <div>
        <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem;">NÃ¡zev smlouvy</div>
        <div style="font-weight: 600; color: #1e293b;">{{ contract.name }}</div>
      </div>

      <div>
        <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem;">Status</div>
        <div>
          {% if contract.is_active %}
            <span style="background: #d1fae5; color: #065f46; padding: 4px 12px; border-radius: 12px; font-size: 0.875rem; font-weight: 500;">âœ“ AktivnÃ­</span>
          {% else %}
            <span style="background: #fee2e2; color: #991b1b; padding: 4px 12px; border-radius: 12px; font-size: 0.875rem; font-weight: 500;">âœ— NeaktivnÃ­</span>
          {% endif %}
        </div>
      </div>

      <div>
        <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem;">Datum zaÄÃ¡tku</div>
        <div style="font-weight: 600; color: #1e293b;">{{ contract.start_date|date:"d.m.Y"|default:"â€”" }}</div>
      </div>

      <div>
        <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem;">Datum ukonÄenÃ­</div>
        <div style="font-weight: 600; color: #1e293b;">{{ contract.end_date|date:"d.m.Y"|default:"â€”" }}</div>
      </div>
    </div>

    {% if contract.description %}
    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
      <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem;">Popis</div>
      <div style="color: #1e293b; line-height: 1.6;">{{ contract.description }}</div>
    </div>
    {% endif %}

    {% if contract.document %}
    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
      <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem;">PÅ™iloÅ¾enÃ½ dokument</div>
      <a href="{{ contract.document.url }}" target="_blank" class="btn btn-outline" style="display: inline-flex; align-items: center; gap: 0.5rem;">
        ğŸ“ {{ contract.document.name|default:"StÃ¡hnout dokument" }}
      </a>
    </div>
    {% endif %}
  </div>

</div>
{% endblock %}

