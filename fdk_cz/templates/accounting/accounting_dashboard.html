{% extends "base.html" %}
{% block title %}ÃšÄetnictvÃ­ | FDK.cz{% endblock %}
{% block header_title %}ğŸ’° ÃšÄetnictvÃ­{% endblock %}
{% block header_subtitle %}SprÃ¡va faktur a penÄ›Å¾nÃ­ch denÃ­kÅ¯{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
  <!-- Actions -->
  <div class="mb-10 flex gap-3">
    <a href="{% url 'create_invoice' %}" class="btn btn-primary">+ NovÃ¡ faktura</a>
    <a href="{% url 'list_invoices' %}" class="btn btn-outline">VÅ¡echny faktury</a>
    <a href="{% url 'free_invoice' %}" class="btn btn-outline">VytvoÅ™ fakturu zdarma</a>
  </div>

  <!-- Statistics -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div class="content-card">
      <h3 class="text-lg font-semibold mb-2">ğŸ“„ Celkem faktur</h3>
      <p class="text-3xl font-bold text-blue-600">{{ total_invoices|default:invoices|length }}</p>
    </div>
    <div class="content-card">
      <h3 class="text-lg font-semibold mb-2">â³ NevyÅ™Ã­zenÃ½ch</h3>
      <p class="text-3xl font-bold text-yellow-600">{{ pending_invoices|default:0 }}</p>
    </div>
    <div class="content-card">
      <h3 class="text-lg font-semibold mb-2">âœ… ZaplacenÃ½ch</h3>
      <p class="text-3xl font-bold text-green-600">{{ paid_invoices|default:0 }}</p>
    </div>
  </div>

  <!-- Recent Invoices -->
  <div class="content-card">
    <h3 class="text-xl font-semibold mb-4">NedÃ¡vnÃ© faktury</h3>
    {% if invoices %}
    <div class="overflow-x-auto">
      <table class="data-table">
        <thead>
          <tr>
            <th class="text-left">ÄŒÃ­slo faktury</th>
            <th class="text-left">Datum vystavenÃ­</th>
            <th class="text-left">Datum splatnosti</th>
            <th class="text-left">PlÃ¡tce</th>
            <th class="text-left">ÄŒÃ¡stka</th>
            <th class="text-left">Stav</th>
            <th class="text-right">Akce</th>
          </tr>
        </thead>
        <tbody>
          {% for invoice in invoices %}
          <tr>
            <td class="font-semibold">{{ invoice.invoice_number }}</td>
            <td>{{ invoice.issue_date|date:"d.m.Y"|default:"â€”" }}</td>
            <td>{{ invoice.due_date|date:"d.m.Y"|default:"â€”" }}</td>
            <td>{{ invoice.company.name|default:"â€”" }}</td>
            <td class="font-semibold">{{ invoice.total_amount|default:"â€”" }} KÄ</td>
            <td>
              {% if invoice.status == 'paid' %}
                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">âœ“ Zaplaceno</span>
              {% elif invoice.status == 'pending' %}
                <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium">â³ ÄŒekÃ¡</span>
              {% elif invoice.status == 'overdue' %}
                <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium">âš ï¸ Po splatnosti</span>
              {% else %}
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium">{{ invoice.get_status_display }}</span>
              {% endif %}
            </td>
            <td class="text-right">
              <a href="{% url 'detail_invoice' invoice.id %}" class="btn btn-outline btn-sm">Detail</a>
              <a href="{% url 'edit_invoice' invoice.id %}" class="btn btn-outline btn-sm">Upravit</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center py-12 bg-gray-50 rounded-lg">
      <div class="text-5xl mb-3">ğŸ“„</div>
      <h4 class="text-lg font-semibold text-gray-700 mb-2">Å½Ã¡dnÃ© faktury</h4>
      <p class="text-gray-600 mb-4">ZatÃ­m nemÃ¡te vytvoÅ™enÃ© Å¾Ã¡dnÃ© faktury.</p>
      <a href="{% url 'create_invoice' %}" class="btn btn-primary">+ VytvoÅ™it prvnÃ­ fakturu</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
