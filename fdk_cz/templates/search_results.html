{% extends "base.html" %}
{% block title %}VÃ½sledky vyhledÃ¡vÃ¡nÃ­: {{ query }} | FDK.cz{% endblock %}
{% block header_title %}ğŸ” VÃ½sledky vyhledÃ¡vÃ¡nÃ­{% endblock %}
{% block header_subtitle %}
  {% if query %}
    HledanÃ½ vÃ½raz: "<strong>{{ query }}</strong>" - Nalezeno {{ total_results }} vÃ½sledkÅ¯
  {% else %}
    Zadejte hledanÃ½ vÃ½raz
  {% endif %}
{% endblock %}

{% block content %}

<div style="max-width: 1200px; margin: 0 auto;">

  {% if not query %}
  <!-- No query entered -->
  <div class="content-card" style="text-align: center; padding: 3rem;">
    <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ”</div>
    <h3 style="margin-bottom: 1rem; color: #1e293b;">VyhledÃ¡vÃ¡nÃ­</h3>
    <p style="color: #64748b; margin-bottom: 2rem;">Zadejte hledanÃ½ vÃ½raz do pole nahoÅ™e</p>
    <form action="{% url 'global_search' %}" method="get" style="max-width: 500px; margin: 0 auto;">
      <div style="display: flex; gap: 0.5rem;">
        <input type="text" name="q" class="form-control" placeholder="Hledat v projektech, Ãºkolech a dokumentech..." style="flex: 1;" autofocus>
        <button type="submit" class="btn btn-primary">ğŸ” Hledat</button>
      </div>
    </form>
  </div>

  {% elif total_results == 0 %}
  <!-- No results -->
  <div class="content-card" style="text-align: center; padding: 3rem;">
    <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ”</div>
    <h3 style="margin-bottom: 1rem; color: #1e293b;">Nic nenalezeno</h3>
    <p style="color: #64748b;">Pro hledanÃ½ vÃ½raz "<strong>{{ query }}</strong>" nebyly nalezeny Å¾Ã¡dnÃ© vÃ½sledky.</p>
  </div>

  {% else %}
  <!-- Results found -->

  {% if projects %}
  <div class="content-card" style="margin-bottom: 2rem;">
    <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 1rem;">
      ğŸ“ Projekty ({{ projects|length }})
    </h3>
    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
      {% for project in projects %}
      <a href="{% url 'detail_project' project.project_id %}" style="display: block; padding: 1rem; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;" onmouseover="this.style.borderColor='#3b82f6'; this.style.background='#f8fafc';" onmouseout="this.style.borderColor='#e2e8f0'; this.style.background='white';">
        <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">{{ project.name }}</div>
        {% if project.description %}
        <div style="font-size: 0.875rem; color: #64748b;">{{ project.description|truncatewords:20 }}</div>
        {% endif %}
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% if tasks %}
  <div class="content-card" style="margin-bottom: 2rem;">
    <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 1rem;">
      âœ“ Ãškoly ({{ tasks|length }})
    </h3>
    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
      {% for task in tasks %}
      <a href="{% url 'detail_task' task.task_id %}" style="display: block; padding: 1rem; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;" onmouseover="this.style.borderColor='#10b981'; this.style.background='#f8fafc';" onmouseout="this.style.borderColor='#e2e8f0'; this.style.background='white';">
        <div style="display: flex; justify-content: space-between; align-items: start;">
          <div style="flex: 1;">
            <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">{{ task.title }}</div>
            {% if task.description %}
            <div style="font-size: 0.875rem; color: #64748b;">{{ task.description|truncatewords:15 }}</div>
            {% endif %}
            {% if task.project %}
            <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 0.5rem;">ğŸ“ {{ task.project.name }}</div>
            {% endif %}
          </div>
          <span style="padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;
            {% if task.status == 'Hotovo' %}background: #d1fae5; color: #059669;
            {% elif task.status == 'ProbÃ­hÃ¡' %}background: #fef3c7; color: #92400e;
            {% else %}background: #f1f5f9; color: #64748b;{% endif %}">
            {{ task.status|default:"NezahÃ¡jeno" }}
          </span>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% if documents %}
  <div class="content-card">
    <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 1rem;">
      ğŸ“„ Dokumenty ({{ documents|length }})
    </h3>
    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
      {% for doc in documents %}
      <a href="{% url 'detail_document' doc.document_id %}" style="display: block; padding: 1rem; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;" onmouseover="this.style.borderColor='#f59e0b'; this.style.background='#f8fafc';" onmouseout="this.style.borderColor='#e2e8f0'; this.style.background='white';">
        <div style="font-weight: 600; color: #1e293b; margin-bottom: 0.25rem;">{{ doc.title }}</div>
        {% if doc.description %}
        <div style="font-size: 0.875rem; color: #64748b;">{{ doc.description|striptags|truncatewords:20 }}</div>
        {% endif %}
        {% if doc.project %}
        <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 0.5rem;">ğŸ“ {{ doc.project.name }}</div>
        {% endif %}
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% endif %}

</div>

{% endblock %}
