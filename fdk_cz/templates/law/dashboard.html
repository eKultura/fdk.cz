{% extends "base.html" %}
{% load i18n %}

{% block title %}AI PrÃ¡vo Dashboard | FDK.cz{% endblock %}
{% block header_title %}âš–ï¸ AI PrÃ¡vo Dashboard{% endblock %}
{% block header_subtitle %}PokroÄilÃ© nÃ¡stroje pro prÃ¡vnÃ­ analÃ½zy, generovÃ¡nÃ­ dokumentÅ¯ a prÃ¡vnÃ­ poradenstvÃ­{% endblock %}

{% block context_breadcrumbs %}
{% include 'inc/org_context_breadcrumb.html' %}
<span class="breadcrumb-sep">â†’</span>
<span style="font-weight: 600; color: #1e293b;">AI PrÃ¡vnÃ­k</span>
{% endblock %}

{% block content %}

<div style="max-width: 1400px; margin: 0 auto;">

  <!-- Quick Actions for AI Law -->
  {% if user.is_authenticated %}
  <div style="background: linear-gradient(135deg, #eff6ff, #dbeafe); border-left: 4px solid #3b82f6; border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
      <div style="font-size: 2rem;">âš¡</div>
      <div>
        <h2 style="font-size: 1.5rem; font-weight: 700; margin: 0;">RychlÃ© akce</h2>
        <p style="color: #64748b; margin: 0;">NejÄastÄ›ji pouÅ¾Ã­vanÃ© AI nÃ¡stroje</p>
      </div>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
      <a href="{% url 'law_query' %}" class="btn btn-primary" style="display: flex; align-items: center; gap: 8px; justify-content: center;">
        ğŸ”¥ NovÃ½ AI dotaz
      </a>
      <a href="{% url 'law_ai_assistant' %}" class="btn btn-success" style="display: flex; align-items: center; gap: 8px; justify-content: center;">
        ğŸ¤– AI Asistent
      </a>
      <a href="{% url 'law_contracts' %}" class="btn btn-outline" style="display: flex; align-items: center; gap: 8px; justify-content: center;">
        ğŸ“„ Å ablony smluv
      </a>
      <a href="{% url 'law_list' %}" class="btn btn-outline" style="display: flex; align-items: center; gap: 8px; justify-content: center;">
        ğŸ“š ZÃ¡kony a pÅ™edpisy
      </a>
    </div>
  </div>
  {% endif %}

  <!-- Statistics Grid -->
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
    <div class="content-card" style="background: linear-gradient(135deg, #eff6ff, #dbeafe);">
      <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div>
          <div style="color: #475569; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">AI Dotazy</div>
          <div style="font-size: 2rem; font-weight: 700; color: #1e293b; margin-bottom: 0.25rem;">{{ total_queries|default:0 }}</div>
          <div style="color: #10b981; font-size: 0.875rem; font-weight: 500;">
            <span>â†—</span> {{ completed_queries|default:0 }} dokonÄenÃ½ch
          </div>
        </div>
        <div style="font-size: 3rem; color: #3b82f6; opacity: 0.3;">ğŸ”¥</div>
      </div>
    </div>

    <div class="content-card" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">
      <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div>
          <div style="color: #475569; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">ÄŒekajÃ­cÃ­ dotazy</div>
          <div style="font-size: 2rem; font-weight: 700; color: #1e293b; margin-bottom: 0.25rem;">{{ pending_queries|default:0 }}</div>
          <div style="color: {% if pending_queries > 5 %}#ef4444{% else %}#10b981{% endif %}; font-size: 0.875rem; font-weight: 500;">
            <span>{% if pending_queries > 5 %}â†“{% else %}â†—{% endif %}</span> zpracovÃ¡vÃ¡ se
          </div>
        </div>
        <div style="font-size: 3rem; color: #f59e0b; opacity: 0.3;">â±ï¸</div>
      </div>
    </div>

    <div class="content-card" style="background: linear-gradient(135deg, #d1fae5, #a7f3d0);">
      <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div>
          <div style="color: #475569; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Dokumenty</div>
          <div style="font-size: 2rem; font-weight: 700; color: #1e293b; margin-bottom: 0.25rem;">{{ total_documents|default:0 }}</div>
          <div style="color: #10b981; font-size: 0.875rem; font-weight: 500;">
            <span>â†—</span> uloÅ¾enÃ½ch
          </div>
        </div>
        <div style="font-size: 3rem; color: #10b981; opacity: 0.3;">ğŸ“„</div>
      </div>
    </div>

    <div class="content-card" style="background: linear-gradient(135deg, #e0e7ff, #c7d2fe);">
      <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div>
          <div style="color: #475569; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">ÃšspÄ›Å¡nost AI</div>
          <div style="font-size: 2rem; font-weight: 700; color: #1e293b; margin-bottom: 0.25rem;">97%</div>
          <div style="color: #10b981; font-size: 0.875rem; font-weight: 500;">
            <span>â†—</span> pÅ™esnost analÃ½z
          </div>
        </div>
        <div style="font-size: 3rem; color: #6366f1; opacity: 0.3;">ğŸ¤–</div>
      </div>
    </div>
  </div>

  <!-- Content Grid for authenticated users -->
  {% if user.is_authenticated %}
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <!-- Recent Queries -->
    <div class="content-card">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b;">ğŸ”¥ NejnovÄ›jÅ¡Ã­ dotazy</h3>
        <a href="{% url 'law_query' %}" class="btn btn-primary btn-sm">+ NovÃ½ dotaz</a>
      </div>

      {% if recent_queries %}
      <div style="display: grid; gap: 0.75rem;">
        {% for query in recent_queries %}
        <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 3px solid {% if query.status == 'completed' %}#10b981{% elif query.status == 'processing' %}#f59e0b{% else %}#64748b{% endif %};">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
            <a href="{% url 'law_query_detail' query.id %}" style="font-weight: 600; color: #3b82f6; text-decoration: none; flex: 1;">{{ query.title }}</a>
            <span style="padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: {% if query.status == 'completed' %}#d1fae5; color: #065f46{% elif query.status == 'processing' %}#fef3c7; color: #92400e{% else %}#f1f5f9; color: #475569{% endif %};">
              {% if query.status == 'completed' %}âœ“ DokonÄeno{% elif query.status == 'processing' %}â±ï¸ ZpracovÃ¡vÃ¡ se{% else %}â±ï¸ ÄŒekÃ¡{% endif %}
            </span>
          </div>
          <div style="color: #64748b; font-size: 0.875rem;">{{ query.created_at|timesince }} zpÄ›t</div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div style="text-align: center; padding: 2rem; background: #f8fafc; border-radius: 8px;">
        <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ”¥</div>
        <p style="color: #64748b; margin-bottom: 1rem;">ZatÃ­m nemÃ¡te Å¾Ã¡dnÃ© AI dotazy</p>
        <a href="{% url 'law_query' %}" class="btn btn-primary">VytvoÅ™it prvnÃ­ dotaz</a>
      </div>
      {% endif %}
    </div>

    <!-- Recent Documents -->
    <div class="content-card">
      <h3 style="font-size: 1.25rem; font-weight: 600; color: #1e293b; margin-bottom: 1rem;">ğŸ“„ NedÃ¡vnÃ© dokumenty</h3>

      {% if recent_documents %}
      <div style="display: grid; gap: 0.75rem;">
        {% for doc in recent_documents %}
        <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 3px solid #3b82f6;">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
            <a href="{% url 'law_documents' %}" style="font-weight: 600; color: #3b82f6; text-decoration: none; flex: 1;">{{ doc.title }}</a>
            <span style="padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; background: #eff6ff; color: #1e40af;">
              {% if doc.document_type == 'contract' %}ğŸ“„ Smlouva{% elif doc.document_type == 'analysis' %}ğŸ” AnalÃ½za{% else %}ğŸ“ Dokument{% endif %}
            </span>
          </div>
          <div style="color: #64748b; font-size: 0.875rem;">{{ doc.created_at|timesince }} zpÄ›t</div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div style="text-align: center; padding: 2rem; background: #f8fafc; border-radius: 8px;">
        <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ“„</div>
        <p style="color: #64748b; margin-bottom: 1rem;">ZatÃ­m nemÃ¡te Å¾Ã¡dnÃ© dokumenty</p>
        <a href="{% url 'law_contracts' %}" class="btn btn-outline">ProchÃ¡zet Å¡ablony</a>
      </div>
      {% endif %}
    </div>
  </div>
  {% else %}
  <!-- Demo content for non-authenticated users -->
  <div style="background: white; border-radius: 12px; padding: 3rem; text-align: center; border: 1px solid #e2e8f0; margin-bottom: 2rem;">
    <div style="font-size: 3rem; margin-bottom: 1rem;">âš¡</div>
    <h3 style="margin-bottom: 1rem; color: #1e293b; font-size: 1.5rem; font-weight: 700;">ZaÄnÄ›te pouÅ¾Ã­vat AI PrÃ¡vo</h3>
    <p style="color: #64748b; margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto;">
      ZÃ­skejte pÅ™Ã­stup k pokroÄilÃ½m AI nÃ¡strojÅ¯m pro prÃ¡vnÃ­ analÃ½zy, automatickÃ© generovÃ¡nÃ­ smluv,
      hledÃ¡nÃ­ precedentÅ¯ a komplexnÃ­ prÃ¡vnÃ­ poradenstvÃ­.
    </p>
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
      <a href="{% url 'registration_cs' %}" class="btn btn-primary">
        ğŸ“ Zaregistrovat se
      </a>
      <a href="{% url 'login_cs' %}" class="btn btn-outline">
        ğŸ” PÅ™ihlÃ¡sit se
      </a>
    </div>
  </div>
  {% endif %}

  <!-- Features Grid -->
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
    <div class="content-card" style="text-align: center;">
      <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ”¥</div>
      <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: #1e293b;">AI AnalÃ½za smluv</h4>
      <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
        AutomatickÃ¡ identifikace rizikovÃ½ch klauzulÃ­, kontrola souladu s prÃ¡vnÃ­mi pÅ™edpisy
      </p>
    </div>

    <div class="content-card" style="text-align: center;">
      <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ”</div>
      <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: #1e293b;">HledÃ¡nÃ­ precedentÅ¯</h4>
      <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
        RychlÃ© vyhledÃ¡vÃ¡nÃ­ relevantnÃ­ch soudnÃ­ch rozhodnutÃ­ a prÃ¡vnÃ­ch precedentÅ¯
      </p>
    </div>

    <div class="content-card" style="text-align: center;">
      <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“„</div>
      <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: #1e293b;">GenerovÃ¡nÃ­ dokumentÅ¯</h4>
      <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
        AutomatickÃ© vytvÃ¡Å™enÃ­ smluv, Å¾alob a dalÅ¡Ã­ch prÃ¡vnÃ­ch dokumentÅ¯ na mÃ­ru
      </p>
    </div>

    <div class="content-card" style="text-align: center;">
      <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ¤–</div>
      <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: #1e293b;">AI PrÃ¡vnÃ­ asistent</h4>
      <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
        InteraktivnÃ­ chat pro okamÅ¾itÃ© odpovÄ›di na prÃ¡vnÃ­ otÃ¡zky
      </p>
    </div>

    <div class="content-card" style="text-align: center;">
      <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“š</div>
      <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: #1e293b;">PrÃ¡vnÃ­ databÃ¡ze</h4>
      <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
        KompletnÃ­ pÅ™Ã­stup k aktuÃ¡lnÃ­m zÃ¡konÅ¯m, vyhlÃ¡Å¡kÃ¡m a prÃ¡vnÃ­m pÅ™edpisÅ¯m
      </p>
    </div>

    <div class="content-card" style="text-align: center;">
      <div style="font-size: 3rem; margin-bottom: 1rem;">âš™ï¸</div>
      <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: #1e293b;">Compliance monitoring</h4>
      <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
        AutomatickÃ© sledovÃ¡nÃ­ zmÄ›n v legislativÄ› a upozornÄ›nÃ­ na dÅ¯leÅ¾itÃ© novinky
      </p>
    </div>
  </div>

</div>
{% endblock %}
