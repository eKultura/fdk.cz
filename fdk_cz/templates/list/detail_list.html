{% extends "base.html" %}
{% load functions %}

{% block title %}{{ list.name }} | FDK.cz{% endblock %}
{% block header_title %}ğŸ“ {{ list.name }}{% endblock %}
{% block header_subtitle %}
  {{ list.description|default:"Detail seznamu" }}
  {% if list.project %}
    â€¢ Projekt: {{ list.project.name }}
  {% endif %}
{% endblock %}

{% block context_breadcrumbs %}
{% include 'inc/org_context_breadcrumb.html' %}
<span class="breadcrumb-sep">â†’</span>
<a href="{% url 'index_list' %}" class="breadcrumb-link">Seznamy</a>
<span class="breadcrumb-sep">â†’</span>
<span style="font-weight: 600; color: #1e293b;">{{ list.name }}</span>
{% endblock %}

{% block content %}

<div class="max-w-5xl mx-auto">
  <!-- Actions -->
  <div class="mb-6 flex gap-3">
    <a href="{% url 'index_list' %}" class="btn btn-outline">â† VÅ¡echny seznamy</a>
    <a href="{% url 'edit_list' list.list_id %}" class="btn btn-secondary">âœï¸ Upravit seznam</a>
  </div>

  <!-- FormulÃ¡Å™ pro pÅ™idÃ¡nÃ­ poloÅ¾ky -->
  <div class="content-card mb-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">+ PÅ™idat novou poloÅ¾ku</h3>
    <form method="post">
      {% csrf_token %}
      <div class="form-row">
        <div class="form-group flex-1">
          <label for="id_content" class="form-label">Obsah poloÅ¾ky <span class="required">*</span></label>
          <input type="text" name="content" id="id_content" required
                 placeholder="Zadejte text poloÅ¾ky"
                 class="form-control">
        </div>
        <div class="form-group" style="width: 140px;">
          <label for="id_item_order" class="form-label">PoÅ™adÃ­ <span class="required">*</span></label>
          <input type="number" name="item_order" id="id_item_order" min="1"
                 value="{{ items|length|add:1 }}" required
                 class="form-control">
        </div>
      </div>
      <div class="flex justify-end pt-3">
        <button type="submit" class="btn btn-primary">+ PÅ™idat poloÅ¾ku</button>
      </div>
    </form>
  </div>

  <!-- Seznam poloÅ¾ek -->
  <div class="content-card">
    <h3 class="text-xl font-semibold mb-4">ğŸ“‹ PoloÅ¾ky seznamu</h3>

    {% if items %}
      <div class="overflow-x-auto">
        <table class="data-table">
          <thead>
            <tr>
              <th class="w-20 text-center">PoÅ™adÃ­</th>
              <th>Obsah</th>
              <th class="text-center w-40">Akce</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
            <tr>
              <td class="text-center">
                <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-medium">
                  {{ item.item_order }}
                </span>
              </td>
              <td class="font-medium text-gray-800">{{ item.content }}</td>
              <td class="text-center">
                <div class="data-table-actions">
                  <a href="{% url 'edit_item' item.item_id %}">âœï¸ Upravit</a>
                  <a href="{% url 'delete_item' item.item_id %}" class="danger">ğŸ—‘ï¸ Smazat</a>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="text-center py-12 bg-gray-50 rounded-lg">
        <div class="text-5xl mb-3">ğŸ“</div>
        <p class="text-gray-600">Tento seznam zatÃ­m nemÃ¡ Å¾Ã¡dnÃ© poloÅ¾ky.</p>
        <p class="text-sm text-gray-500 mt-2">PÅ™idejte prvnÃ­ poloÅ¾ku pomocÃ­ formulÃ¡Å™e nahoÅ™e.</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
