{% extends "base.html" %}
{% load functions %}

{% block title %}{{ list.name }} | FDK.cz{% endblock %}
{% block header_title %}ğŸ“ {{ list.name }}{% endblock %}
{% block header_subtitle %}
  {{ list.description|default:"Detail seznamu" }}
  {% if list.project %}
    â€¢ Projekt: {{ list.project.name }}
  {% endif %}
{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
  <!-- Actions -->
  <div class="mb-10 flex gap-3">
    <a href="{% url 'index_list' %}" class="btn btn-outline">â† VÅ¡echny seznamy</a>
    <a href="{% url 'edit_list' list.list_id %}" class="btn btn-secondary">âœï¸ Upravit seznam</a>
  </div>

  <!-- FormulÃ¡Å™ pro pÅ™idÃ¡nÃ­ poloÅ¾ky -->
  <div class="content-card mb-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">+ PÅ™idat novou poloÅ¾ku</h3>
    <form method="post" class="flex gap-3 items-end">
      {% csrf_token %}
      <div class="flex-1">
        <label for="id_content" class="block text-sm font-medium text-gray-700 mb-1">PoloÅ¾ka</label>
        <input type="text" name="content" id="id_content" required
               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>
      <div class="w-32">
        <label for="id_item_order" class="block text-sm font-medium text-gray-700 mb-1">PoÅ™adÃ­</label>
        <input type="number" name="item_order" id="id_item_order" min="1" value="{{ items|length|add:1 }}" required
               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>
      <button type="submit" class="btn btn-primary">PÅ™idat</button>
    </form>
  </div>

  <!-- Seznam poloÅ¾ek -->
  <div class="content-card">
    <h3 class="text-xl font-semibold mb-4">ğŸ“‹ PoloÅ¾ky seznamu</h3>

    {% if items %}
      <div class="overflow-x-auto">
        <table class="data-table">
          <thead>
            <tr>
              <th class="w-20">PoÅ™adÃ­</th>
              <th>Obsah</th>
              <th class="text-right w-32">Akce</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
            <tr>
              <td class="text-center">
                <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-medium">
                  {{ item.item_order }}
                </span>
              </td>
              <td class="font-medium text-gray-800">{{ item.content }}</td>
              <td class="text-right">
                <div class="data-table-actions">
                  <a href="{% url 'edit_item' item.item_id %}">âœï¸ Upravit</a>
                  <a href="{% url 'delete_item' item.item_id %}" class="text-red-600 hover:text-red-800">ğŸ—‘ï¸ Smazat</a>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="text-center py-12 bg-gray-50 rounded-lg">
        <div class="text-5xl mb-3">ğŸ“</div>
        <p class="text-gray-600">Tento seznam zatÃ­m nemÃ¡ Å¾Ã¡dnÃ© poloÅ¾ky.</p>
        <p class="text-sm text-gray-500 mt-2">PÅ™idejte prvnÃ­ poloÅ¾ku pomocÃ­ formulÃ¡Å™e nahoÅ™e.</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
