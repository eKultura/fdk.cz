{% extends "base.html" %}
{% load i18n %}

{% block title %}Upravit {{ article.title }} | N치pov캩da | FDK.cz{% endblock %}
{% block header_title %}九勇 Upravit 캜l치nek{% endblock %}
{% block header_subtitle %}
{{ article.title }}
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">

  <div class="content-card">
    <form method="POST">
      {% csrf_token %}

      <!-- Title -->
      <div class="form-group">
        <label for="title" class="form-label">N치zev 캜l치nku <span class="required">*</span></label>
        <input type="text" name="title" id="title" class="form-control" required value="{{ article.title }}">
      </div>

      <!-- Slug -->
      <div class="form-group">
        <label for="slug" class="form-label">URL slug <span class="required">*</span></label>
        <input type="text" name="slug" id="slug" class="form-control" required value="{{ article.slug }}">
        <div class="form-help">URL friendly verze n치zvu.</div>
      </div>

      <!-- Category -->
      <div class="form-group">
        <label for="category" class="form-label">Kategorie <span class="required">*</span></label>
        <select name="category" id="category" class="form-control" required>
          {% for value, label in categories %}
          <option value="{{ value }}" {% if article.category == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Module (optional) -->
      <div class="form-group">
        <label for="module" class="form-label">Modul (voliteln칠)</label>
        <select name="module" id="module" class="form-control">
          <option value="">-- Bez modulu --</option>
          {% for module in modules %}
          <option value="{{ module.module_id }}" {% if article.module and article.module.module_id == module.module_id %}selected{% endif %}>
            {{ module.display_name }}
          </option>
          {% endfor %}
        </select>
      </div>

      <!-- Content -->
      <div class="form-group">
        <label for="content" class="form-label">Obsah (Markdown) <span class="required">*</span></label>
        <textarea name="content" id="content" rows="20" class="form-control" required>{{ article.content }}</textarea>
        <div class="form-help">Podporuje Markdown form치tov치n칤</div>
      </div>

      <!-- Meta Description -->
      <div class="form-group">
        <label for="meta_description" class="form-label">Kr치tk칳 popis</label>
        <input type="text" name="meta_description" id="meta_description" class="form-control" maxlength="255" value="{{ article.meta_description|default:'' }}">
      </div>

      <!-- Keywords -->
      <div class="form-group">
        <label for="keywords" class="form-label">Kl칤캜ov치 slova</label>
        <input type="text" name="keywords" id="keywords" class="form-control" value="{{ article.keywords|default:'' }}">
        <div class="form-help">Odd캩len칠 캜치rkami</div>
      </div>

      <!-- Order -->
      <div class="form-group">
        <label for="order" class="form-label">Po콏ad칤 zobrazen칤</label>
        <input type="number" name="order" id="order" class="form-control" value="{{ article.order }}" min="0">
      </div>

      <!-- Flags -->
      <div class="form-group">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="is_published" {% if article.is_published %}checked{% endif %} class="w-4 h-4">
          <span>Publikov치no</span>
        </label>
      </div>

      <div class="form-group">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="is_technical" {% if article.is_technical %}checked{% endif %} class="w-4 h-4">
          <span>游댢 Technick치 dokumentace</span>
        </label>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
        <a href="{% url 'help_detail' article.slug %}" class="btn btn-outline">Zru코it</a>
        <button type="submit" class="btn btn-primary">游 Ulo쬴t zm캩ny</button>
      </div>
    </form>
  </div>

</div>
{% endblock %}
