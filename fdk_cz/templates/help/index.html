{% extends "base.html" %}
{% load i18n %}

{% block title %}NÃ¡povÄ›da | FDK.cz{% endblock %}
{% block header_title %}ğŸ“š NÃ¡povÄ›da a dokumentace{% endblock %}
{% block header_subtitle %}
KompletnÃ­ prÅ¯vodce systÃ©mem FDK.cz pro efektivnÃ­ Å™Ã­zenÃ­ organizacÃ­
{% endblock %}

{% block context_breadcrumbs %}
<span style="font-weight: 600; color: #1e293b;">ğŸ“š NÃ¡povÄ›da</span>
{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto space-y-8">

  <!-- Header Actions -->
  {% if can_edit %}
  <div class="flex justify-end mb-4">
    <a href="{% url 'help_add' %}" class="btn btn-primary">ï¼‹ PÅ™idat ÄlÃ¡nek</a>
  </div>
  {% endif %}

  <!-- ObecnÃ½ Ãºvod -->
  {% if intro_articles %}
  <div class="content-card">
    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
      <span class="text-3xl mr-3">ğŸ </span> ObecnÃ½ Ãºvod
    </h2>
    <p class="text-gray-600 mb-6">ZÃ¡kladnÃ­ informace o systÃ©mu FDK.cz a jeho moÅ¾nostech</p>

    <div class="space-y-3">
      {% for article in intro_articles %}
      <a href="{% url 'help_detail' article.slug %}" class="block p-4 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-semibold text-gray-800 text-lg">{{ article.title }}</h3>
            {% if article.meta_description %}
            <p class="text-sm text-gray-600 mt-1">{{ article.meta_description }}</p>
            {% endif %}
          </div>
          {% if can_edit %}
          <div class="flex gap-2">
            <a href="{% url 'help_edit' article.slug %}" class="text-blue-600 hover:text-blue-800 text-sm">âœï¸</a>
            <a href="{% url 'help_delete' article.slug %}" class="text-red-600 hover:text-red-800 text-sm">ğŸ—‘ï¸</a>
          </div>
          {% endif %}
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Dokumentace modulÅ¯ -->
  {% if modules_with_articles %}
  <div class="content-card">
    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
      <span class="text-3xl mr-3">ğŸ“¦</span> Dokumentace modulÅ¯
    </h2>
    <p class="text-gray-600 mb-6">PodrobnÃ½ popis jednotlivÃ½ch modulÅ¯ a jejich funkcÃ­</p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {% for module, articles in modules_with_articles.items %}
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4">
        <div class="flex items-center gap-3 mb-3">
          <span class="text-2xl">{{ module.icon|default:"ğŸ“¦" }}</span>
          <h3 class="font-bold text-gray-800 text-lg">{{ module.display_name }}</h3>
        </div>

        <div class="space-y-2">
          {% for article in articles %}
          <a href="{% url 'help_detail' article.slug %}" class="block px-3 py-2 bg-white hover:bg-blue-50 rounded border border-gray-200 transition">
            <div class="flex justify-between items-center">
              <span class="text-gray-800">{{ article.title }}</span>
              {% if can_edit %}
              <div class="flex gap-1">
                <a href="{% url 'help_edit' article.slug %}" class="text-blue-600 hover:text-blue-800 text-xs" onclick="event.stopPropagation();">âœï¸</a>
              </div>
              {% endif %}
            </div>
          </a>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- ÄŒasto kladenÃ© otÃ¡zky -->
  {% if faq_articles %}
  <div class="content-card">
    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
      <span class="text-3xl mr-3">â“</span> ÄŒasto kladenÃ© otÃ¡zky
    </h2>

    <div class="space-y-3">
      {% for article in faq_articles %}
      <a href="{% url 'help_detail' article.slug %}" class="block p-4 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition">
        <div class="flex justify-between items-start">
          <h3 class="font-semibold text-gray-800">{{ article.title }}</h3>
          {% if can_edit %}
          <div class="flex gap-2">
            <a href="{% url 'help_edit' article.slug %}" class="text-blue-600 hover:text-blue-800 text-sm">âœï¸</a>
            <a href="{% url 'help_delete' article.slug %}" class="text-red-600 hover:text-red-800 text-sm">ğŸ—‘ï¸</a>
          </div>
          {% endif %}
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- TechnickÃ¡ dokumentace (jen pro administrÃ¡tory a testery) -->
  {% if technical_articles %}
  <div class="content-card bg-yellow-50 border-2 border-yellow-300">
    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
      <span class="text-3xl mr-3">ğŸ”§</span> TechnickÃ¡ dokumentace
    </h2>
    <p class="text-gray-600 mb-4">
      <strong>âš ï¸ ViditelnÃ© pouze pro administrÃ¡tory a testery</strong>
    </p>

    <div class="space-y-3">
      {% for article in technical_articles %}
      <a href="{% url 'help_detail' article.slug %}" class="block p-4 bg-white hover:bg-yellow-100 rounded-lg border border-yellow-200 transition">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-semibold text-gray-800">{{ article.title }}</h3>
            {% if article.meta_description %}
            <p class="text-sm text-gray-600 mt-1">{{ article.meta_description }}</p>
            {% endif %}
          </div>
          {% if can_edit %}
          <div class="flex gap-2">
            <a href="{% url 'help_edit' article.slug %}" class="text-blue-600 hover:text-blue-800 text-sm">âœï¸</a>
            <a href="{% url 'help_delete' article.slug %}" class="text-red-600 hover:text-red-800 text-sm">ğŸ—‘ï¸</a>
          </div>
          {% endif %}
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Empty state -->
  {% if not intro_articles and not modules_with_articles and not faq_articles and not technical_articles %}
  <div class="content-card text-center py-12">
    <div class="text-6xl mb-4">ğŸ“š</div>
    <h3 class="text-xl font-semibold text-gray-800 mb-2">ZatÃ­m zde nenÃ­ Å¾Ã¡dnÃ¡ dokumentace</h3>
    <p class="text-gray-600 mb-4">Dokumentace se prÃ¡vÄ› pÅ™ipravuje</p>
    {% if can_edit %}
    <a href="{% url 'help_add' %}" class="btn btn-primary">ï¼‹ PÅ™idat prvnÃ­ ÄlÃ¡nek</a>
    {% endif %}
  </div>
  {% endif %}

</div>
{% endblock %}
