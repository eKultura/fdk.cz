{% extends "base.html" %}
{% block title %}Seznam rizik | FDK.cz{% endblock %}
{% block header_title %}‚ö†Ô∏è Seznam rizik{% endblock %}
{% block header_subtitle %}P≈ôehled identifikovan√Ωch rizik a jejich ≈ô√≠zen√≠{% endblock %}

{% block content %}
<div style="max-width: 1400px; margin: 0 auto;">
  <!-- Actions -->
  <div class="mb-10 flex gap-3">
    <a href="{% url 'create_risk' %}" class="btn btn-primary">+ Nov√© riziko</a>
    <a href="{% url 'risk_dashboard' %}" class="btn btn-outline">Dashboard</a>
    <a href="{% url 'risk_matrix' %}" class="btn btn-outline">Rizikov√° matice</a>
  </div>

  <div class="content-card">
    {% if risks %}
      <table class="data-table">
        <thead>
          <tr>
            <th>N√°zev rizika</th>
            <th>Kategorie</th>
            <th style="text-align: center;">Z√°va≈ænost</th>
            <th style="text-align: center;">Pravdƒõpodobnost</th>
            <th style="text-align: center;">Akce</th>
          </tr>
        </thead>
        <tbody>
          {% for risk in risks %}
          <tr>
            <td>
              <a href="{% url 'detail_risk' risk.risk_id %}" style="font-weight: 600; color: #3b82f6; text-decoration: none;">
                {{ risk.title }}
              </a>
              {% if risk.project %}
              <div style="font-size: 0.75rem; color: #64748b; margin-top: 0.25rem;">
                üìÅ {{ risk.project.name }}
              </div>
              {% endif %}
            </td>
            <td>{{ risk.get_category_display }}</td>
            <td style="text-align: center;">
              <span style="padding: 4px 8px; border-radius: 8px; font-size: 0.875rem; font-weight: 600; color: white; background: {% if risk.impact >= 4 %}#dc2626{% elif risk.impact >= 3 %}#f59e0b{% else %}#10b981{% endif %};">
                {{ risk.get_impact_display }}
              </span>
            </td>
            <td style="text-align: center;">
              <span style="padding: 4px 8px; border-radius: 8px; font-size: 0.875rem; font-weight: 600; color: white; background: {% if risk.probability >= 4 %}#dc2626{% elif risk.probability >= 3 %}#f59e0b{% else %}#10b981{% endif %};">
                {{ risk.get_probability_display }}
              </span>
            </td>
            <td style="text-align: center;">
              <div style="display: flex; gap: 0.5rem; justify-content: center;">
                <a href="{% url 'detail_risk' risk.risk_id %}" class="btn btn-sm btn-outline">üëÅÔ∏è Detail</a>
                <a href="{% url 'edit_risk' risk.risk_id %}" class="btn btn-sm btn-outline">‚úèÔ∏è</a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div style="text-align: center; padding: 3rem;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
        <p style="color: #64748b;">Zat√≠m nejsou ≈æ√°dn√° rizika k zobrazen√≠.</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
