{% extends "base.html" %}
{% block title %}{{ swot.title }} | SWOT | FDK.cz{% endblock %}
{% block header_title %}üìä {{ swot.title }}{% endblock %}
{% block header_subtitle %}SWOT anal√Ωza{% endblock %}

{% block context_breadcrumbs %}
{% if swot.organization %}
  <a href="{% url 'organization_detail' swot.organization.organization_id %}" class="breadcrumb-link">{{ swot.organization.name }}</a>
{% elif swot.project %}
  <a href="{% url 'detail_project' swot.project.project_id %}" class="breadcrumb-link">{{ swot.project.name }}</a>
{% else %}
  {% include 'inc/org_context_breadcrumb.html' %}
{% endif %}
<span class="breadcrumb-sep">‚Üí</span>
<a href="{% url 'list_swot_analyses' %}" class="breadcrumb-link">SWOT anal√Ωzy</a>
<span class="breadcrumb-sep">‚Üí</span>
<span style="font-weight: 600; color: #1e293b;">{{ swot.title }}</span>
{% endblock %}

{% block content %}

<div style="max-width: 1600px; margin: 0 auto;">
  <!-- Actions -->
  <div style="margin-bottom: 1.5rem; display: flex; justify-content: flex-end; gap: 0.75rem;">
    <a href="{% url 'edit_swot_analysis' swot.swot_id %}" class="btn btn-primary">‚úèÔ∏è Upravit</a>
    <a href="{% url 'delete_swot_analysis' swot.swot_id %}" class="btn btn-outline" style="color: #dc2626;">üóëÔ∏è Smazat</a>
  </div>

  {% if swot.description %}
  <div class="content-card" style="margin-bottom: 1.5rem;">
    <p style="color: #475569;">{{ swot.description }}</p>
  </div>
  {% endif %}

  <!-- SWOT Matrix -->
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem;">
    <!-- Strengths (S) - Top Left -->
    <div style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); border: 2px solid #10b981; border-radius: 12px; padding: 1.5rem; min-height: 300px;">
      <h3 style="font-weight: 700; color: #065f46; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="font-size: 1.5rem;">üí™</span> Siln√© str√°nky (S)
        <span style="background: #065f46; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem;">{{ swot.strengths|length }}</span>
      </h3>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        {% for item in swot.strengths %}
          <div style="background: white; border-radius: 8px; padding: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                      transform: translateX({% widthratio item.weight 10 30 %}px);
                      border-left: 4px solid {% if item.weight >= 8 %}#059669{% elif item.weight >= 5 %}#10b981{% else %}#6ee7b7{% endif %};">
            <div style="font-size: 0.875rem; color: #1e293b;">{{ item.text }}</div>
            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 0.25rem;">V√°ha: {{ item.weight }}/10</div>
          </div>
        {% empty %}
          <p style="color: #6b7280; font-style: italic; text-align: center; padding: 2rem 0;">≈Ω√°dn√© polo≈æky</p>
        {% endfor %}
      </div>
    </div>

    <!-- Weaknesses (W) - Top Right -->
    <div style="background: linear-gradient(135deg, #fee2e2, #fecaca); border: 2px solid #ef4444; border-radius: 12px; padding: 1.5rem; min-height: 300px;">
      <h3 style="font-weight: 700; color: #991b1b; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="font-size: 1.5rem;">‚ö†Ô∏è</span> Slab√© str√°nky (W)
        <span style="background: #991b1b; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem;">{{ swot.weaknesses|length }}</span>
      </h3>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        {% for item in swot.weaknesses %}
          <div style="background: white; border-radius: 8px; padding: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                      transform: translateX(-{% widthratio item.weight 10 30 %}px);
                      border-left: 4px solid {% if item.weight >= 8 %}#dc2626{% elif item.weight >= 5 %}#ef4444{% else %}#f87171{% endif %};">
            <div style="font-size: 0.875rem; color: #1e293b;">{{ item.text }}</div>
            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 0.25rem;">V√°ha: {{ item.weight }}/10</div>
          </div>
        {% empty %}
          <p style="color: #6b7280; font-style: italic; text-align: center; padding: 2rem 0;">≈Ω√°dn√© polo≈æky</p>
        {% endfor %}
      </div>
    </div>

    <!-- Opportunities (O) - Bottom Left -->
    <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); border: 2px solid #3b82f6; border-radius: 12px; padding: 1.5rem; min-height: 300px;">
      <h3 style="font-weight: 700; color: #1e40af; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="font-size: 1.5rem;">üöÄ</span> P≈ô√≠le≈æitosti (O)
        <span style="background: #1e40af; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem;">{{ swot.opportunities|length }}</span>
      </h3>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        {% for item in swot.opportunities %}
          <div style="background: white; border-radius: 8px; padding: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                      transform: translateX({% widthratio item.weight 10 30 %}px);
                      border-left: 4px solid {% if item.weight >= 8 %}#1d4ed8{% elif item.weight >= 5 %}#3b82f6{% else %}#60a5fa{% endif %};">
            <div style="font-size: 0.875rem; color: #1e293b;">{{ item.text }}</div>
            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 0.25rem;">V√°ha: {{ item.weight }}/10</div>
          </div>
        {% empty %}
          <p style="color: #6b7280; font-style: italic; text-align: center; padding: 2rem 0;">≈Ω√°dn√© polo≈æky</p>
        {% endfor %}
      </div>
    </div>

    <!-- Threats (T) - Bottom Right -->
    <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); border: 2px solid #f59e0b; border-radius: 12px; padding: 1.5rem; min-height: 300px;">
      <h3 style="font-weight: 700; color: #92400e; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="font-size: 1.5rem;">‚ö°</span> Hrozby (T)
        <span style="background: #92400e; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem;">{{ swot.threats|length }}</span>
      </h3>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        {% for item in swot.threats %}
          <div style="background: white; border-radius: 8px; padding: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                      transform: translateX(-{% widthratio item.weight 10 30 %}px);
                      border-left: 4px solid {% if item.weight >= 8 %}#d97706{% elif item.weight >= 5 %}#f59e0b{% else %}#fbbf24{% endif %};">
            <div style="font-size: 0.875rem; color: #1e293b;">{{ item.text }}</div>
            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 0.25rem;">V√°ha: {{ item.weight }}/10</div>
          </div>
        {% empty %}
          <p style="color: #6b7280; font-style: italic; text-align: center; padding: 2rem 0;">≈Ω√°dn√© polo≈æky</p>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Summary Stats -->
  <div class="content-card">
    <h3 style="font-weight: 600; color: #1e293b; margin-bottom: 1rem;">üìà Souhrn</h3>
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
      <div style="background: #d1fae5; border-radius: 8px; padding: 1rem; text-align: center;">
        <div style="font-size: 2rem; font-weight: 700; color: #065f46;">{{ swot.strengths|length }}</div>
        <div style="font-size: 0.75rem; color: #065f46; font-weight: 600;">Siln√© str√°nky</div>
      </div>
      <div style="background: #fee2e2; border-radius: 8px; padding: 1rem; text-align: center;">
        <div style="font-size: 2rem; font-weight: 700; color: #991b1b;">{{ swot.weaknesses|length }}</div>
        <div style="font-size: 0.75rem; color: #991b1b; font-weight: 600;">Slab√© str√°nky</div>
      </div>
      <div style="background: #dbeafe; border-radius: 8px; padding: 1rem; text-align: center;">
        <div style="font-size: 2rem; font-weight: 700; color: #1e40af;">{{ swot.opportunities|length }}</div>
        <div style="font-size: 0.75rem; color: #1e40af; font-weight: 600;">P≈ô√≠le≈æitosti</div>
      </div>
      <div style="background: #fef3c7; border-radius: 8px; padding: 1rem; text-align: center;">
        <div style="font-size: 2rem; font-weight: 700; color: #92400e;">{{ swot.threats|length }}</div>
        <div style="font-size: 0.75rem; color: #92400e; font-weight: 600;">Hrozby</div>
      </div>
    </div>
    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e5e7eb; font-size: 0.875rem; color: #6b7280;">
      Vytvo≈ôeno: {{ swot.created_at|date:"d.m.Y H:i" }}
      {% if swot.created_by %} u≈æivatelem {{ swot.created_by.username }}{% endif %}
      | Aktualizov√°no: {{ swot.updated_at|date:"d.m.Y H:i" }}
    </div>
  </div>
</div>
{% endblock %}
