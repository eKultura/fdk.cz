{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ document.title }} | Dokument | FDK.cz{% endblock %}
{% block header_title %}{{ document.title }}{% endblock %}
{% block header_subtitle %}
Dokument v projektu <strong>{{ document.project.name }}</strong>
{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
  <!-- Actions -->
  <div class="mb-6 flex gap-3">
    <a href="{% url 'detail_project' document.project.project_id %}" class="btn btn-outline">â† ZpÄ›t na projekt</a>
    <a href="{% url 'edit_document' document.pk %}" class="btn btn-secondary">âœï¸ Upravit</a>
    <a href="{% url 'delete_document' document.pk %}" class="btn btn-danger"
       onclick="return confirm('Opravdu chcete smazat tento dokument?');">ğŸ—‘ï¸ Smazat</a>
  </div>

  <!-- ZÃ¡kladnÃ­ informace -->
  <div class="content-card mb-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“‹ Informace o dokumentu</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">NÃ¡zev dokumentu</label>
        <p class="text-lg font-semibold text-gray-900">{{ document.title }}</p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">Typ dokumentu</label>
        <p class="text-gray-900">
          <span class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-700">
            {{ document.document_type|default:"â€”" }}
          </span>
        </p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">Kategorie</label>
        <p class="text-gray-900">{{ document.category.name|default:"â€”" }}</p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">Projekt</label>
        <p class="text-gray-900">
          <a href="{% url 'detail_project' document.project.project_id %}" class="text-blue-600 hover:text-blue-900">
            {{ document.project.name }}
          </a>
        </p>
      </div>
    </div>
  </div>

  <!-- Obsah dokumentu -->
  <div class="content-card mb-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“„ Obsah dokumentu</h2>
    <div class="prose max-w-none text-gray-800 leading-relaxed">
      {{ document.description|safe|default:"<p class='text-gray-500 italic'>Å½Ã¡dnÃ½ obsah.</p>" }}
    </div>
  </div>

  <!-- Metadata -->
  <div class="content-card">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">â±ï¸ Metadata</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">NahrÃ¡no</label>
        <p class="text-sm text-gray-900">
          {{ document.uploaded_at|date:"d.m.Y H:i" }}
        </p>
      </div>

      {% if document.uploaded_by %}
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">NahrÃ¡l</label>
        <p class="text-sm text-gray-900">
          {{ document.uploaded_by.get_full_name|default:document.uploaded_by.username }}
        </p>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
