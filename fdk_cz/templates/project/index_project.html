{% extends 'project/base.html' %}
{% load static %}{% load i18n %}

{% block title %}Projekty{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4 text-center" style="font-weight: bold; color: #333;">Přehled projektů</h1>

    <!-- Tabulka projektů -->
    <div class="bg-white shadow-md rounded-lg overflow-hidden">
        <table class="min-w-full bg-white">
            <thead>
                <tr class="bg-gray-100">
                    <th class="py-3 px-4 text-left text-gray-700 font-semibold w-1/12">ID</th>
                    <th class="py-3 px-4 text-left text-gray-700 font-semibold">Název</th>
                    <th class="py-3 px-4 text-left text-gray-700 font-semibold">Popis</th>
                    <th class="py-3 px-4 text-left text-gray-700 font-semibold">Datum vytvoření</th>
                    <th class="py-3 px-4 text-left text-gray-700 font-semibold">Akce</th>
                </tr>
            </thead>
            <tbody>
                {% if user_projects %}
                    {% for project in user_projects %}
                        <tr class="border-b">
                            <td class="py-3 px-4 text-gray-600">{{ project.project_id }}</td>
                            <td class="py-3 px-4 text-gray-600">{{ project.name }}</td>
                            <td class="py-3 px-4 text-gray-600 text-truncate">{{ project.description|default:"Žádný popis." }}</td>
                            <td class="py-3 px-4 text-gray-600">{{ project.created|date:"d.m.Y" }}</td>
                            <td class="py-3 px-4 text-blue-600 hover:text-blue-800">
                                <a href="{% url 'detail_project' project.project_id %}" class="mr-2">Detail</a>
                                <a href="{% url 'edit_project_cs' project.project_id %}" class="text-yellow-600 hover:text-yellow-800">Upravit</a>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" class="py-3 px-4 text-center text-gray-500">Nemáte žádné projekty. <br>Založit <a href="{% url 'new_project_cs' %}" class="text-blue-600 hover:text-blue-800 font-semibold">nový projekt</a> nebo požádejte o přidání do existujícího projektu svého kolegu.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <!-- Sekce pro bloky -->
    <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Seznam mých úkolů -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold text-gray-700 mb-4">Seznam mých úkolů</h2>
            <ul class="list-disc pl-5">
                {% if assigned_tasks %}
                    {% for task in assigned_tasks|slice:":5" %}
                        <li class="text-gray-600">
                            <a href="{% url 'detail_task' task.task_id %}" class="text-blue-600 hover:text-blue-800">{{ task.title }}</a> 
                            - <small>{{ task.due_date|date:"d.m.Y" }}</small>
                        </li>
                    {% endfor %}
                {% else %}
                    <li class="text-gray-500">Nemáte žádné úkoly, je čas začít! </li>
                {% endif %}
            </ul>
        </div>

        <!-- Rychlé odkazy pro vytvoření nových položek -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold text-gray-700 mb-4">Vytvořit novou položku</h2>
            <div class="grid gap-3">
                <a href="{% url 'new_project_cs' %}" class="text-blue-600 hover:text-blue-800 font-semibold">Nový projekt</a>
                <a href="{% url 'create_list' %}" class="text-blue-600 hover:text-blue-800 font-semibold">Nový seznam</a>
                <a href="#" class="text-blue-600 hover:text-blue-800 font-semibold">Nový sklad</a> <!-- Doplnit URL pro vytvoření skladu -->
                <a href="{% url 'create_invoice' %}" class="text-blue-600 hover:text-blue-800 font-semibold">Novou fakturu</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
