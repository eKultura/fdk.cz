{% extends "base.html" %}
{% load i18n %}

{% block title %}Nov칳 dokument | FDK.cz{% endblock %}
{% block header_title %}Nov칳 dokument{% endblock %}
{% block header_subtitle %}P콏idejte dokument do projektu <strong>{{ project.name }}</strong>{% endblock %}

{% block meta %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
  <div class="content-card">
    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- N치zev -->
      <div class="form-group">
        <label for="id_title" class="form-label">N치zev dokumentu <span class="required">*</span></label>
        <input type="text" name="title" id="id_title" required
               value="{{ form.title.value|default_if_none:'' }}"
               placeholder="Nap콏. Z치pis z jedn치n칤, Technick치 dokumentace"
               class="form-control">
        {% if form.title.errors %}
          <p class="form-error">{{ form.title.errors|join:", " }}</p>
        {% endif %}
      </div>

      <!-- Typ a Kategorie vedle sebe -->
      <div class="form-row">
        <div class="form-group">
          <label for="id_document_type" class="form-label">Typ dokumentu <span class="required">*</span></label>
          <input type="text" name="document_type" id="id_document_type" required
                 value="{{ form.document_type.value|default_if_none:'' }}"
                 placeholder="Nap콏. z치pis, smlouva, p콏칤loha"
                 class="form-control">
          {% if form.document_type.errors %}
            <p class="form-error">{{ form.document_type.errors|join:", " }}</p>
          {% endif %}
          <div class="form-help">Kategorizace typu dokumentu</div>
        </div>

        <div class="form-group">
          <label for="id_category" class="form-label">Kategorie</label>
          <select name="category" id="id_category" class="form-control">
            <option value="">-- Vyberte kategorii --</option>
            {% for category in form.category.field.queryset %}
              <option value="{{ category.pk }}"
                      {% if form.category.value == category.pk %}selected{% endif %}>
                {{ category.name }}
              </option>
            {% endfor %}
          </select>
          {% if form.category.errors %}
            <p class="form-error">{{ form.category.errors|join:", " }}</p>
          {% endif %}
          <div class="form-help">Voliteln칠 - p콏i콏azen칤 ke kategorii 칰kol콢</div>
        </div>
      </div>

      <!-- Obsah -->
      <div class="form-group">
        <label for="id_description" class="form-label">Obsah dokumentu</label>
        <textarea name="description" id="id_description"
                  class="form-control"
                  rows="8"
                  placeholder="Zadejte obsah dokumentu...">{{ form.description.value|default_if_none:'' }}</textarea>
        {% if form.description.errors %}
          <p class="form-error">{{ form.description.errors|join:", " }}</p>
        {% endif %}
        <div class="form-help">Textov칳 editor s podporou form치tov치n칤</div>
      </div>

      <!-- Akce -->
      <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
        <a href="{% url 'detail_project' project.project_id %}" class="btn btn-outline">Zru코it</a>
        <button type="submit" class="btn btn-primary">游늯 Ulo쬴t dokument</button>
      </div>
    </form>
  </div>
</div>

<!-- Inicializace Summernote -->
<script>
  $(document).ready(function() {
    $('#id_description').summernote({
      placeholder: 'Zadejte obsah dokumentu...',
      tabsize: 2,
      height: 300,
      toolbar: [
        ['style', ['bold', 'italic', 'underline', 'clear']],
        ['font', ['fontsize', 'color']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['table', ['table']],
        ['insert', ['link']],
        ['view', ['fullscreen', 'codeview']]
      ]
    });
  });
</script>
{% endblock %}
