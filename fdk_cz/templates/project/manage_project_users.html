{% extends "base.html" %}
{% load i18n %}

{% block title %}SprÃ¡va uÅ¾ivatelÅ¯ projektu | FDK.cz{% endblock %}
{% block header_title %}SprÃ¡va uÅ¾ivatelÅ¯{% endblock %}
{% block header_subtitle %}PÅ™idÃ¡vejte a spravujte Äleny tÃ½mu pro projekt <strong>{{ project.name }}</strong>{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">

  <!-- FormulÃ¡Å™ pro pÅ™idÃ¡nÃ­ Älena -->
  <div class="content-card">
    <h3 style="font-weight:600;font-size:1.1rem;margin-bottom:1rem;">â• PÅ™idat Älena do projektu</h3>

    <form method="post" style="margin-bottom:1.5rem;">
      {% csrf_token %}
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
        <div>
          <label for="id_user" class="block text-sm font-medium text-gray-700">UÅ¾ivatel</label>
          {{ form.user }}
        </div>
        <div>
          <label for="id_role" class="block text-sm font-medium text-gray-700">Role</label>
          {{ form.role }}
        </div>
      </div>
      <div class="text-right mt-4">
        <button type="submit" class="btn btn-primary">ğŸ’¾ PÅ™idat uÅ¾ivatele</button>
      </div>
    </form>
  </div>

  <!-- Seznam ÄlenÅ¯ projektu -->
  <div class="content-card mt-6">
    <h3 style="font-weight:600;font-size:1.1rem;margin-bottom:1rem;">ğŸ‘¥ ÄŒlenovÃ© projektu</h3>

    {% if members %}
    <div style="overflow-x:auto;">
      <table style="width:100%;border-collapse:collapse;">
        <thead style="background:#f9fafb;">
          <tr>
            <th class="px-4 py-2 text-left text-gray-600 font-semibold">UÅ¾ivatel</th>
            <th class="px-4 py-2 text-left text-gray-600 font-semibold">Role</th>
            <th class="px-4 py-2 text-left text-gray-600 font-semibold text-center">Akce</th>
          </tr>
        </thead>
        <tbody>
          {% for member in members %}
          <tr class="border-b border-gray-100 hover:bg-gray-50 transition">
            <td class="px-4 py-2 text-gray-700">{{ member.user.username }}</td>
            <td class="px-4 py-2 text-gray-700">{{ member.role.role_name }}</td>
            <td class="px-4 py-2 text-center">
              <a href="{% url 'remove_project_user' project.project_id member.user.id %}"
                 class="text-red-600 hover:text-red-800 font-medium">ğŸ—‘ï¸ Odebrat</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="empty-state" style="text-align:center;padding:2rem;color:#6b7280;">
      <div style="font-size:2rem;">ğŸ¤</div>
      <p style="margin-top:0.5rem;">ZatÃ­m nejsou pÅ™idÃ¡ni Å¾Ã¡dnÃ­ ÄlenovÃ© projektu.</p>
    </div>
    {% endif %}
  </div>

</div>
{% endblock %}
