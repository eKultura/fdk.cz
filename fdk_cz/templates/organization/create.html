{% extends "base.html" %}
{% block title %}NovÃ¡ organizace | FDK.cz{% endblock %}
{% block header_title %}ğŸ¢ VytvoÅ™enÃ­ novÃ© organizace{% endblock %}
{% block header_subtitle %}ZaloÅ¾te svou organizaci a zaÄnÄ›te spravovat projekty{% endblock %}

{% block context_breadcrumbs %}
<a href="{% url 'organization_dashboard' %}" class="breadcrumb-link">Organizace</a>
<span class="breadcrumb-sep">â†’</span>
<span style="font-weight: 600; color: #1e293b;">NovÃ¡</span>
{% endblock %}

{% block content %}

<div style="max-width: 700px; margin: 0 auto;">

  {% if existing_orgs_count >= max_orgs %}
  <!-- Warning - Limit reached -->
  <div style="background: #fef2f2; border-left: 4px solid #ef4444; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
    <h3 style="font-size: 1.125rem; font-weight: 600; color: #991b1b; margin-bottom: 0.75rem;">
      âš ï¸ MÃ¡te maximum organizacÃ­
    </h3>
    <p style="color: #991b1b; font-size: 0.875rem; line-height: 1.8; margin: 0;">
      JiÅ¾ mÃ¡te vytvoÅ™enou jednu organizaci. Pro vytvoÅ™enÃ­ dalÅ¡Ã­ organizace je potÅ™eba VIP ÃºÄet.
      <br>
      <a href="{% url 'organization_dashboard' %}" style="text-decoration: underline; font-weight: 600;">â† ZpÄ›t na pÅ™ehled organizacÃ­</a>
    </p>
  </div>
  {% endif %}

  <!-- Info Card -->
  <div style="background: #eff6ff; border-left: 4px solid #3b82f6; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
    <h3 style="font-size: 1.125rem; font-weight: 600; color: #1e40af; margin-bottom: 0.75rem;">
      â„¹ï¸ Co to znamenÃ¡ vytvoÅ™it organizaci?
    </h3>
    <ul style="color: #1e40af; font-size: 0.875rem; line-height: 1.8; margin-left: 1.5rem;">
      <li>Budete sprÃ¡vcem organizace s plnÃ½mi prÃ¡vy</li>
      <li>MÅ¯Å¾ete pÅ™idÃ¡vat dalÅ¡Ã­ Äleny</li>
      <li>Organizace slouÅ¾Ã­ pro sdÃ­lenÃ­ projektÅ¯, smluv a dalÅ¡Ã­ch dat</li>
      <li>Organizace bude po vytvoÅ™enÃ­ okamÅ¾itÄ› aktivnÃ­</li>
      {% if existing_orgs_count < max_orgs %}
      <li><strong>MÅ¯Å¾ete vytvoÅ™it aÅ¾ {{ max_orgs }} organizaci</strong> (mÃ¡te {{ existing_orgs_count }})</li>
      {% endif %}
    </ul>
  </div>

  <!-- Form -->
  <div class="content-card">
    <form method="POST" {% if existing_orgs_count >= max_orgs %}style="pointer-events: none; opacity: 0.6;"{% endif %}>
      {% csrf_token %}

      <div class="form-group">
        <label for="id_name" class="form-label">NÃ¡zev organizace <span class="required">*</span></label>
        <input
          type="text"
          id="id_name"
          name="name"
          class="form-control"
          value="{{ name|default:'' }}"
          placeholder="Zadejte nÃ¡zev organizace"
          required
        >
        <div class="form-help">OficiÃ¡lnÃ­ nÃ¡zev vaÅ¡Ã­ firmy nebo organizace</div>
      </div>

      <div class="form-group">
        <label for="id_ico" class="form-label">IÄŒO <span class="required">*</span></label>
        <input
          type="text"
          id="id_ico"
          name="ico"
          class="form-control"
          value="{{ ico|default:'' }}"
          placeholder="12345678"
          pattern="[0-9]{8}"
          maxlength="8"
          required
        >
        <div class="form-help">IdentifikaÄnÃ­ ÄÃ­slo organizace (8 ÄÃ­slic)</div>
      </div>

      <div style="background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px; padding: 1rem; margin: 1.5rem 0;">
        <p style="font-size: 0.875rem; color: #92400e; margin: 0;">
          <strong>âš ï¸ UpozornÄ›nÃ­:</strong> Po vytvoÅ™enÃ­ organizace jiÅ¾ nebude moÅ¾nÃ© zmÄ›nit IÄŒO. UjistÄ›te se, Å¾e je zadÃ¡no sprÃ¡vnÄ›.
        </p>
      </div>

      <!-- Actions -->
      <div style="display: flex; justify-content: flex-end; gap: 0.75rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0; margin-top: 2rem;">
        <a href="{% url 'organization_dashboard' %}" class="btn btn-outline">ZruÅ¡it</a>
        <button type="submit" class="btn btn-primary" {% if existing_orgs_count >= max_orgs %}disabled{% endif %}>âœ“ VytvoÅ™it organizaci</button>
      </div>
    </form>
  </div>

</div>
{% endblock %}
